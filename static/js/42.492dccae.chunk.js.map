{"version":3,"sources":["pages/admin/pages/Generate/Place/components/PlaceTypes/index.module.scss","enums/GenerationType.js","pages/admin/pages/Generate/Place/components/ManualContent/index.jsx","pages/admin/pages/Generate/Place/components/PlaceTypes/index.jsx","pages/admin/pages/Generate/Place/components/CustomContent/index.jsx","pages/admin/pages/Generate/Place/components/RadioGenerationType/index.jsx","utils/FoursquareClient.js","pages/admin/pages/Generate/Place/index.jsx","enums/PlaceType.js","services/admin/sight.service.js","enums/ExcursionRouteType.js","services/admin/city.service.js","services/admin/generationPlace.service.js","utils/GoogleClient.js","utils/PlaceTypeTranslate.js","enums/FoursquarePlaceType.js","services/admin/country.service.js"],"names":["module","exports","GenerationTypeEnums","ManualContent","generatePlacesByCity","generationFinishCity","countryId","setLoading","mapRef","useState","countOfLimitSearch","setCountOfLimitSearch","cityList","setCityList","city","setCity","types","setTypes","type","setType","dictionary","useContext","DictionaryContext","getCity","cityId","CityService","show","getType","getCityList","GenerationPlaceService","cityWhiteList","manual","per_page","data","map","value","id","label","name","startManualGenerate","console","log","failed","place_types","list","generatedSquare","json","geometry","eq","Object","keys","FoursquarePlaceTypeEnum","typeIds","reduce","accum","key","isGeneratedTypes","uniqTypesId","includes","PlaceTypeTranslate","getTranslateForFoursquareType","useEffect","GoogleClient","getRectangle","current","north","south","east","west","style","display","gap","alignItems","marginBottom","onClick","disabled","width","margin","size","placeholder","options","showSearch","minWidth","filterOption","text","textLowerCase","trim","toLowerCase","labelLowerCase","valueLowerCase","toString","onChange","marginTop","e","target","Park","setPlaceTypes","placeTypes","places","className","styles","typeWrapper","typeWrapper__type","active","getTranslateForType","typeColor","PlaceTypeEnum","amusement_park","aquarium","tourist_attraction","zoo","restaurant","AutomaticContent","setGeometry","rectangle","useRef","timeOutId","allGeneratedSquare","generateSquareByGeometry","drawSquareByPlaceType","forEach","square","setMap","country_id","center","getCenter","squareSize","lat","maxHorizontalDif","lng","maxVerticalDif","draggable","editable","addListener","clearTimeout","setTimeout","bounds","getBounds","centerHorizontalLat","centerVerticalLng","newGeometry","parseBounds","errorDifHorizontal","errorDifVertical","setOptions","flexDirection","height","backgroundColor","RadioGenerationType","generationType","setGenerationType","Group","defaultValue","custom","i","FoursquareClient","searchParams","fetch","QueryString","stringify","headers","Authorization","this","accept","results","foursquarePlaceId","fields","join","placeDetails","opening_hours","parseOpeningHours","hours","regular","photoUrl","Promise","resolve","downloadImage","file","photosList","photos","status","filesIds","shortPhotosList","filter","_","index","length","photo","prefix","suffix","getPhotoFile","openingHours","days","formatOpeningHours","result","openHour","openTimeSplit","open","split","closeTimeSplit","openTimeFormat","closeTimeFormat","openTime","closeTime","day","slice","close","GeneratePlace","useParams","country","setCountry","loading","mapBlockRef","squareRef","mapInit","opt","zoom","restriction","latLngBounds","strictBounds","window","google","maps","Map","limit","currentI","currentJ","forLoop","currentType","countStep","placeHeightCoordinate","placeWidthCoordinate","stepHorizontal","stepVertical","message","city_id","indexI","indexJ","getPlaces","foursquareType","lastType","typeOriginIds","isGenerate","reject","placesToDB","categories","ne","sw","create","place","placeToBd","translatable","original_name","formatted_address","location","foursquare_place_id","fsq_id","check_coordinates","place_type","latitude","geocodes","main","longitude","getPhotosId","files_ids","getPlacesDetails","website","international_phone_number","tel","getMarker","SightService","createBatch","sights","finish","generation_type","getCountry","CountryService","ref","paddingTop","xmlns","version","viewBox","x","y","fill","d","attributeName","from","to","dur","repeatCount","process","reserve","botanical_garden","beach","mountains","sea","lake","art_gallery","campground","church","mosque","museum","theater","park","place_of_view","customTypesList","googleTypesList","sightId","params","SightModel","axios","get","API_MAKE_ADMIN_SIGHT_SHOW","paramsSerializer","merge","all","include","API_ADMIN_SIGHT_LIST","sightList","sight","post","API_ADMIN_SIGHT_CREATE","API_ADMIN_SIGHT_CREATE_BATCH","put","API_MAKE_ADMIN_SIGHT_UPDATE","delete","API_MAKE_ADMIN_SIGHT_DELETE","API_MAKE_ADMIN_SIGHT_TRANSLATE_EDIT","workStatus","API_MAKE_ADMIN_SIGHT_CHANGE_STATUS","work_status","API_MAKE_ADMIN_SIGHT_NEED_REVIEW","API_MAKE_ADMIN_SIGHT_GET_CITIES","cities","CityModel","ExcursionRouteTypeEnum","API_ADMIN_CITY_LIST","API_MAKE_ADMIN_CITY_SHOW","API_ADMIN_CITY_CREATE","API_MAKE_ADMIN_CITY_DELETE","API_MAKE_ADMIN_CITY_EDIT","API_MAKE_ADMIN_CITY_TRANSLATE_EDIT","API_MAKE_ADMIN_CITY_CHANGE_STATUS","ADMIN_CREATE_SQUARE_GENERATE_PLACE","url","API_ADMIN_SIGHT_DOWNLOAD_IMAGE","ADMIN_CREATE_FINISH_STATUS_BY_CITY_GENERATE_PLACE","ADMIN_GET_GENERATED_SQUARE_GENERATE_PLACE","then","res","viewport","northeast","southwest","photo_ref","photoReference","photo_reference","placeId","defaultFields","requestDetailPlace","catch","error","currentParams","direction","LatLngBounds","extend","LatLng","position","icon","props","Marker","color","Rectangle","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","getNorthEast","path","Polyline","geodesic","pinSVGFilled","labelOriginFilled","Point","anchor","scale","labelOrigin","getSouthWest","undefined","time","mountain","building","castle","garden","historical_and_protected_object","monument","palace","art_museum","historical_museum","science_museum","opera_theatre","forest","national_park","natural_park","API_ADMIN_COUNTRY_LIST","countryList","CountryModel","API_MAKE_ADMIN_COUNTRY_SHOW","API_ADMIN_COUNTRY_CREATE","API_MAKE_ADMIN_COUNTRY_UPDATE","API_MAKE_ADMIN_COUNTRY_TRANSLATE_EDIT","API_MAKE_ADMIN_COUNTRY_DELETE"],"mappings":";iHACAA,EAAOC,QAAU,CAAC,YAAc,gCAAgC,kBAAoB,sCAAsC,OAAS,6B,oNCD9GC,EAAmB,4CAEE,OAFF,sCACpC,WAAqB,MAAO,WAAU,kBACtC,WAAqB,MAAO,aAAU,EAFF,G,wCCCxC,06MAwBe,SAASC,EAAc,GAA8E,IAA7EC,EAAoB,EAApBA,qBAAsBC,EAAoB,EAApBA,qBAAsBC,EAAS,EAATA,UAAWC,EAAU,EAAVA,WAAYC,EAAM,EAANA,OACtG,EAAoDC,mBAAS,GAAE,mBAAxDC,EAAkB,KAAEC,EAAqB,KAChD,EAAgCF,mBAAS,IAAG,mBAArCG,EAAQ,KAAEC,EAAW,KAC5B,EAAwBJ,mBAAS,MAAK,mBAA/BK,EAAI,KAAEC,EAAO,KACpB,EAA0BN,mBAAS,IAAG,mBAA/BO,EAAK,KAAEC,EAAQ,KACtB,EAAwBR,mBAAS,MAAK,mBAA/BS,EAAI,KAAEC,EAAO,KACbC,EAAcC,qBAAWC,KAAzBF,WAEDG,EAAO,uCAAG,WAAOC,GAAM,uFACNC,IAAYC,KAAKF,GAAO,OAAjC,OAAJV,EAAI,gBAEJa,EAAQb,GAAK,OACnBC,EAAQD,GAAK,2CAChB,gBALY,sCAOPc,EAAW,uCAAG,sGACKC,IAAuBC,cAAc,CACtDxB,UAAWA,EACXY,KAAMhB,EAAoB6B,OAC1BC,SAAU,MACZ,gBAJKC,EAAI,EAAJA,KAMPpB,EAAYoB,EAAKC,KAAI,YAAU,MAAO,CAACC,MAAd,EAAFC,GAA2BC,MAAnB,EAAJC,UAAuC,2CACrE,kBARgB,mCAUXC,EAAmB,uCAAG,yFACnBzB,EAAK,CAAD,qDAINJ,EAAqB,IAAE,iDAIL,OAArB8B,QAAQC,IAAI,UAAS,SAEErC,EAAqBU,EAAM,CAACI,GAAOR,GAAmB,OAE5D,GAF4D,SAAtEgC,EAAM,EAANA,OAEPnC,GAAW,IAEPmC,EAAO,CAAD,gBACmB,OAAzBF,QAAQC,IAAI,cAAa,4CAIvBpC,EAAqBS,EAAKsB,GAAIlC,EAAoB6B,OAAQX,EAAWuB,YAAYC,KAAKV,KAAI,YAAO,SAALC,UAAkB,QAEpHK,QAAQC,IAAI,OAAM,4CACrB,kBAvBwB,mCAyBnBd,EAAO,uCAAG,WAAOb,GAAI,yFACQe,IAAuBgB,gBAAgB,CAClEC,KAAM,CAACC,SAAUjC,EAAKiC,UACtBC,GAAI,CACA9B,KAAM+B,OAAOC,KAAKC,IAAwBC,SAASC,QAAO,SAACC,EAAOC,GAAG,4BAC9DD,GAAK,CACRH,IAAwBC,QAAQG,OAChC,OAEV,OARIC,EAAgB,OAUhBC,EAAcD,EAAiBvB,KAAKC,KAAI,YAAM,SAAJhB,QAEhDD,EAASgC,OAAOC,KAAKC,IAAwBC,SAASC,QAAO,SAACC,EAAOC,GACjE,OAAGE,EAAYC,SAASP,IAAwBC,QAAQG,IAC7CD,EAGL,GAAN,mBACOA,GAAK,CACR,CACInB,MAAOgB,IAAwBC,QAAQG,GACvClB,MAAOsB,IAAmBC,8BAA8B,CAACL,SAGlE,KAAI,2CACV,gBA1BY,sCAmDb,OAvBAM,qBAAU,WACD/C,GAKLgD,IAAaC,aACTvD,EAAOwD,QACP,CACIC,MAAOnD,EAAKiC,SAASkB,MACrBC,MAAOpD,EAAKiC,SAASmB,MACrBC,KAAMrD,EAAKiC,SAASoB,KACpBC,KAAMtD,EAAKiC,SAASqB,MAExB,aAEL,CAACtD,IAEJ+C,qBAAU,WACNjC,MACD,IAGEhB,EAKD,6BACI,yBAAKyD,MAAO,CAACC,QAAS,OAAQC,IAAK,GAAIC,WAAY,SAAUC,cAAe,KACxE,kBAAC,IAAM,CAACvD,KAAK,UACLwD,QAASnC,EACToC,SAAoB,OAAT7D,IAAmBI,IAASR,EACvC2D,MAAO,CAACO,MAAO,SAAQ,sBAGnC,yBAAKP,MAAO,CAACQ,OAAQ,WACjB,kBAAC,IAAM,CACHC,KAAK,QACLC,YAAa,cACbC,QAASpE,EACTqE,YAAY,EACZZ,MAAO,CAACa,SAAU,QAClBC,aAAc,SAACC,EAAK,GAAqB,IAAnBjD,EAAK,EAALA,MAAOE,EAAK,EAALA,MACnBgD,EAAgBD,EAAKE,OAAOC,cAC5BC,EAAiBnD,EAAMkD,cACvBE,EAAiBtD,EAAMuD,WAAWH,cACxC,OAAOC,EAAe9B,SAAS2B,IAAkBI,EAAe/B,SAAS0B,IAE7EO,SAAUpE,IAEbT,GACG,oCACI,kBAAC,IAAM,CACHgE,KAAK,QACLC,YAAa,cACbC,QAAShE,EACTiE,YAAY,EACZZ,MAAO,CAACa,SAAU,OAAQU,UAAW,GACrCT,aAAc,SAACC,EAAK,GAAqB,IAAnBjD,EAAK,EAALA,MAAOE,EAAK,EAALA,MACnBgD,EAAgBD,EAAKE,OAAOC,cAC5BC,EAAiBnD,EAAMkD,cACvBE,EAAiBtD,EAAMuD,WAAWH,cACxC,OAAOC,EAAe9B,SAAS2B,IAAkBI,EAAe/B,SAAS0B,IAE7EO,SAAUxE,IAEbD,GACG,kBAAC,IAAK,CACF6D,YAAY,8BACZ5C,MAAOzB,EACPiF,SAAU,SAAAE,GAAC,OAAIlF,GAAuBkF,EAAEC,OAAO3D,QAC/CkC,MAAO,CAACuB,UAAW,EAAGtB,QAAS,cAhDhD,K,gCClHA,SAASyB,EAAK,GAAsC,IAArCC,EAAa,EAAbA,cAAeC,EAAU,EAAVA,WAAYC,EAAM,EAANA,OACrD,OACI,yBAAKC,UAAWC,IAAOC,aAClBH,EAAOhE,KAAK,SAAAhB,GAAI,OACb,yBAAKiF,UAAS,UAAKC,IAAOE,kBAAiB,YAAIL,IAAe/E,GAAQkF,IAAOG,QAAU7B,QAAS,kBAAMsB,EAAc9E,KAC/GyC,IAAmB6C,oBAAoBtF,Q,4BCjB5D,06MA0BA,IAAMuF,GAAS,mBACVC,IAAcC,eAAiB,SAAO,cACtCD,IAAcE,SAAW,OAAK,cAC9BF,IAAcG,mBAAqB,QAAM,cACzCH,IAAcI,IAAM,SAAO,cAC3BJ,IAAcK,WAAa,QAAM,GAGvB,SAASC,EAAiB,GAAa,EAAZjD,aAAmC,IAArBzD,EAAS,EAATA,UAAWE,EAAM,EAANA,OACxDY,EAAcC,qBAAWC,KAAzBF,WACP,EAAoCX,mBAAS,MAAK,mBAA3CwF,EAAU,KAAED,EAAa,KAChC,EAAgCvF,mBAAS,MAAK,mBAAvCsC,EAAQ,KAAEkE,EAAW,KACtBC,EAAYC,iBAAO,MACnBC,EAAYD,iBAAO,MACnBE,EAAqBF,iBAAO,IAE5BG,EAAwB,uCAAG,8EAE7BxD,IAAaC,aACTvD,EAAOwD,QACP,CACIC,MAAO,UACPC,MAAO,UACPC,KAAM,UACNC,KAAM,aA6Bd,2CACH,kBAtC6B,mCA+GxBmD,EAAqB,uCAAG,yFACrBtB,EAAW,CAAD,gDAMb,OAFFoB,EAAmBrD,QAAQwD,SAAQ,SAACC,GAChCA,EAAOC,OAAO,SAChB,SAEmB7F,IAAuBgB,gBAAgB,CACxD8E,WAAYrH,EACZY,KAAM+E,EACNjE,SAAU,MACX,KAAD,WAJKC,EAAI,EAAJA,KAOPoF,EAAmBrD,QAAU/B,EAAKC,KAAI,gBAAEa,EAAQ,EAARA,SAAQ,OAC5Ce,IAAaC,aACTvD,EAAOwD,QACPjB,MAEN,2CACL,kBAtB0B,mCA4B3B,OAJAc,qBAAU,WACN0D,MACD,CAACtB,IAGA,6BACI,yBAAK5B,MAAO,CAACC,QAAS,OAAQC,IAAK,GAAIC,WAAY,WAC/C,kBAAC,IAAM,CAACtD,KAAK,UAAUwD,QAAS4C,EAA0BjD,MAAO,CAACO,MAAO,SAAQ,qBAEjF,kBAAC,IAAM,CAAC1D,KAAK,UAAUwD,QAxGnB,WACZ,IAAMkD,EAASpH,EAAOwD,QAAQ6D,YAIxBC,EAAa,CACf7D,MAAO2D,EAAOG,MAAQC,GACtB9D,MAAO0D,EAAOG,MAAQC,GACtB7D,KAAMyD,EAAOK,MAAQC,GACrB9D,KAAMwD,EAAOK,MAAQC,IAGzBhB,EAAUlD,QAAUF,IAAaC,aAC7BvD,EAAOwD,QACP8D,EACA,OACA,CACIK,WAAW,EACXC,UAAU,IAIlBlB,EAAUlD,QAAQqE,YAAY,kBAAkB,WAC5CC,aAAalB,EAAUpD,SACvBoD,EAAUpD,QAAUuE,YAAW,WAC3B,IAAMC,EAAStB,EAAUlD,QAAQyE,YAC3Bb,EAASY,EAAOX,YAChBa,EAAsBd,EAAOG,MAC7BY,EAAoBf,EAAOK,MAE7BW,EAAc9E,IAAa+E,YAAYL,GAE3C,IAAIzF,GAAYA,EAASkB,QAAU2E,EAAY3E,OAASlB,EAASoB,OAASyE,EAAYzE,MAAQpB,EAASqB,OAASwE,EAAYxE,MAAQrB,EAASmB,QAAU0E,EAAY1E,MAAnK,CAIA,IAGM4E,EArCW,GAkCKF,EAAY3E,MAAQ2E,EAAY1E,MAIhD6E,EArCS,GAkCKH,EAAYzE,KAAOyE,EAAYxE,KAK/C0E,IACAF,EAAW,2BACJA,GAAW,IACd3E,MAAOyE,EAAsBV,GAC7B9D,MAAOwE,EAAsBV,MAGjCe,IACAH,EAAW,2BACJA,GAAW,IACdxE,KAAMuE,EAAoBT,GAC1B/D,KAAMwE,EAAoBT,OAI9BY,GAAsBC,KACtB9B,EAAY2B,GACZ1B,EAAUlD,QAAQgF,WAAW,CACzBR,OAAQI,QAGjB,SAyC0CvE,MAAO,CAACO,MAAO,SAAQ,QAChE,kBAAC,IAAM,CAAC1D,KAAK,UAAUwD,QAtCrB,aAsCqCL,MAAO,CAACO,MAAO,SAAQ,UAElE,kBAAC,EAAS,CAACsB,OAAQ9E,EAAWuB,YAAYC,KAAKV,KAAI,YAAO,SAALC,SAC1C6D,cAAeA,EACfC,WAAYA,IAEvB,yBAAK5B,MAAO,CAACC,QAAS,OAAQ2E,cAAe,SAAU1E,IAAK,GAAIE,aAAc,KACzExB,OAAOC,KAAKuD,GAAWvE,KAAI,SAAAhB,GAAI,OAC5B,yBAAKmD,MAAO,CAACC,QAAS,OAAQE,WAAY,WACtC,yBAAKH,MAAO,CAACO,MAAO,GAAIsE,OAAQ,GAAIC,gBAAiB1C,EAAUvF,MAC/D,mCAASyC,IAAmB6C,oBAAoBtF,U,aC5LzD,SAASkI,EAAoB,GAAqC,IAApCC,EAAc,EAAdA,eAAgBC,EAAiB,EAAjBA,kBACzD,OACI,kBAAC,IAAMC,MAAK,CAAC5D,SAAU,SAAAE,GAAC,OAAIyD,EAAkBzD,EAAEC,OAAO3D,QAAQqH,aAAcH,GACzE,kBAAC,IAAK,CAAClH,MAAOjC,EAAoB6B,QAAO,UACzC,kBAAC,IAAK,CAACI,MAAOjC,EAAoBuJ,QAAO,W,oDCbrD,kmGAAAC,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,ssDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,sQAC0C,IAErBC,EAAgB,4CAoHhC,OApHgC,kFAGjC,oGAAyC,OAAjBC,EAAY,+BAAG,GAAE,kBAIFC,MAAM,+CAAD,OAAgDC,IAAYC,UAAUH,IAAiB,CACvHI,QAAS,CACLC,cAAeC,KAAK3G,IACpB4G,OAAQ,sBAEd,8BAAErH,OAAI,OALM,OAKN,SALDsH,EAAO,EAAPA,QAAO,kBAOPA,GAAO,2DAGP,IAAE,0DAEhB,kDAnBgC,IAmBhC,qEAED,WAA+BC,GAAiB,qFAAa,OAAXC,EAAM,+BAAG,GAAE,kBAEnBT,MAAM,wCAAD,OAAyCQ,EAAiB,YAAIP,IAAYC,UAAU,CAACO,OAAQA,EAAOC,KAAK,QAAU,CACtJP,QAAS,CACLC,cAAeC,KAAK3G,IACpB4G,OAAQ,sBAEd,8BAAErH,OAAI,OAKkB,OAVpB0H,EAAY,OAOlBhI,QAAQC,IAAI+H,EAAc,gBAE1BA,EAAaC,cAAgBP,KAAKQ,kBAAkBF,EAAaG,MAAMC,gBAChEJ,EAAaG,MAAM,kBAEnBH,GAAY,2DAEZ,MAAI,0DAElB,mDApBA,IAoBA,iEAED,WAA2BK,GAAU,IAAF,4FAErB,IAAIC,SAAQ,SAAAC,GAAO,OAAIxC,WAAWwC,EAAS,QAAK,uBACnClJ,IAAuBmJ,cAAcH,GAAS,OAAvD,OAAJI,EAAI,0BAEC,OAAJA,QAAI,IAAJA,OAAI,EAAJA,EAAM7I,IAAK6I,EAAO,MAAI,yDAEtB,MAAI,yDAElB,mDAXA,IAWA,gEAED,WAA0BZ,GAAiB,uFACpB,OAAfa,EAAa,GAAG,EAAD,OACCrB,MAAM,wCAAD,OAAyCQ,EAAiB,WAAW,CAC1FL,QAAS,CACLC,cAAeC,KAAK3G,IACpB4G,OAAQ,sBAEd,OALQ,GAOW,OAPjBgB,EAAM,QAOAC,OAAc,iCACDD,EAAOrI,OAAM,OAAhCoI,EAAU,wDAEH,IAAE,QAI6D,GADtEG,EAAW,IACTC,GAA4B,QAAV,EAAAJ,SAAU,aAAV,EAAYK,QAAO,SAACC,EAAGC,GAAK,OAAKA,EAAQ,OAAM,IAEnDC,OAAO,CAAD,yCACf,IAAE,QAGJhC,EAAI,EAAE,KAAD,QAAEA,EAAI4B,EAAgBI,QAAM,iBAEiB,OADjDC,EAAQL,EAAgB5B,GACxBmB,EAAQ,UAAMc,EAAMC,OAAM,mBAAWD,EAAME,QAAM,UAGjD,IAAIf,SAAQ,SAAAC,GAAO,OAAIxC,WAAWwC,EAAS,QAAK,yBACnCb,KAAK4B,aAAajB,GAAS,SAEtC,QAFFI,EAAI,cAEF,IAAJA,OAAI,EAAJA,EAAM7I,MACNiJ,EAAQ,sBAAOA,GAAQ,CAAEJ,EAAK7I,MACjC,QAVuCsH,IAAG,iDAaxC2B,GAAQ,iDAClB,mDAtCA,IAsCA,+BAED,SAA0BU,GACtB,IAAMC,EAAO,CAAC,SAAU,UAAW,YAAa,WAAY,SAAU,WAAY,UAC9EC,EAAqB,KAEzB,OAAGF,EACCE,EAAqBF,EAAa1I,QAAQ,SAAC6I,EAAQC,GAC/C,IAAMC,EAAgBD,EAASE,KAAKC,MAAM,KACpCC,EAAiBJ,EAASE,KAAKC,MAAM,KACrCE,EAA0C,IAAzBJ,EAAcV,OAAeU,EAAc,GAAKA,EAAc,GAC/EK,EAA4C,IAA1BF,EAAeb,OAAea,EAAe,GAAKA,EAAe,GACnFG,EAA8B,SAAnBF,EAA4B,OAASA,EAChDG,EAAgC,SAApBF,EAA6B,OAASA,EAExD,OAAO,2BACAP,GAAM,kBACRF,EAAKG,EAASS,IAAM,GAAK,CACtBP,KAAK,GAAD,OAAKK,EAASG,MAAM,EAAG,GAAE,YAAIH,EAASG,MAAM,EAAG,IACnDC,MAAM,GAAD,OAAKH,EAAUE,MAAM,EAAG,GAAE,YAAIF,EAAUE,MAAM,EAAG,SAG/D,IAKAZ,MACV,EApHgC,G,aCHrC,06MA2Be,SAASc,IACpB,IAAOzM,EAAa0M,cAAb1M,UACP,EAA4CG,mBAASP,EAAoB6B,QAAO,mBAAzEsH,EAAc,KAAEC,EAAiB,KACxC,EAA8B7I,mBAAS,MAAK,mBAArCwM,EAAO,KAAEC,EAAU,KAC1B,EAA8BzM,oBAAS,GAAM,mBAAtC0M,EAAO,KAAE5M,EAAU,KACpB6M,EAAcjG,iBAAO,MACrBkG,EAAYlG,iBAAO,MACnB3G,EAAS2G,iBAAO,MAEtB3E,QAAQC,IAAIwK,EAAS,WAErB,IAAMK,EAAO,uCAAG,kGAAOvK,EAAQ,+BAAG,GACxBwK,EAAM,CACR3F,OAAQ,CAACG,IAAK,UAAWE,KAAM,SAC/BuF,KAAM,EACNC,YAAa,CACTC,aAAa,eACN3K,GAEP4K,cAAc,IAKtBnN,EAAOwD,QAAU,IAAI4J,OAAOC,OAAOC,KAAKC,IAAIX,EAAYpJ,QAASuJ,GAAI,2CACxE,kBAdY,mCAgBPnN,EAAoB,uCAAG,WAAOU,GAAI,2FAEf,GAFiBmF,EAAU,+BAAG,GAAI+H,EAAK,uBAC5DzN,GAAW,GACXiC,QAAQC,IAAI,UACP3B,EAAKiC,UAAakD,EAAWyF,OAAM,yCAC7B,CAAChJ,QAAQ,IAAM,OAMb,OAJbF,QAAQC,IAAI,UACRwL,EAAW,EACXC,EAAW,EAETC,EAAO,uCAAG,WAAM3C,GAAC,uFACV9B,EAAI,EAAE,KAAD,OAAEA,EAAIzD,EAAWyF,QAAM,iBAC3B0C,EAAcnI,EAAWyD,GAG3B2E,EAAY,EAGVC,EAAwBxN,EAAKiC,SAASkB,MAAQnD,EAAKiC,SAASmB,MAC5DqK,EAAuBzN,EAAKiC,SAASoB,KAAOrD,EAAKiC,SAASqB,KAG1DoK,EAAiBD,EAAuBF,EACxCI,EAAeH,EAAwBD,EAC7C7L,QAAQC,IAAI,UAEZwL,EAAW,EACG,KAAD,QAAEA,GAAYI,GAAS,iBAChCH,EAAW,EACG,KAAD,QAAEA,GAAYG,GAAS,kCAE1B,IAAIvD,SAAQ,SAAAC,GAAO,OAAIxC,WAAWwC,EAAS,QAAK,yBAGhBhH,EAClC,CACIhB,SAAU,CACNkB,MAAOnD,EAAKiC,SAASmB,MAASuK,EAAeR,EAC7C9J,KAAMrD,EAAKiC,SAASqB,KAAQoK,EAAiBN,EAC7ChK,MAAOpD,EAAKiC,SAASmB,MAASuK,GAAgBR,EAAW,GACzD7J,KAAMtD,EAAKiC,SAASqB,KAAQoK,GAAkBN,EAAW,IAE7DpN,KAAMA,EACNI,KAAMkN,EACNJ,UAEP,QAEoB,GAFpB,SAZMtL,EAAM,EAANA,OAAe,EAAPgM,QAAa,EAAJxN,KAcxBsB,QAAQC,IAAI,WAERC,EAAO,CAAD,yCACC,CAACA,QAAQ,IAAK,QAtBSwL,IAAU,wBAFdD,IAAU,wBAhBbvE,IAAG,uBAiDzC,OAJDlH,QAAQC,IAAI,UAER4K,EAAUrJ,SACVqJ,EAAUrJ,QAAQ0D,OAAO,MAC5B,kBAEM,CAAChF,QAAQ,IAAM,4CACzB,gBArDY,0DAwDIyL,IAAS,iDAIrB,OAJqB,2BAElBd,EAAUrJ,SACVqJ,EAAUrJ,QAAQ0D,OAAO,MAC5B,kBAEM,CACHhF,QAAQ,EACRiM,QAAS7N,EAAKsB,GACdsM,QAAS,KAAEA,QACXxN,KAAM,KACN0N,OAAQX,EACRY,OAAQX,IACX,2DAER,gBAjFyB,sCAkFpBnK,EAAY,uCAAG,qGAmBb,OAnBqBhB,EAAQ,EAARA,SAAUjC,EAAI,EAAJA,KAAMI,EAAI,EAAJA,KAAM8M,EAAK,EAALA,MAAgB,EAATK,UAAS,SAG3D7L,QAAQC,IAAI,UAELwB,EAA4BlB,EAA5BkB,MAAOC,EAAqBnB,EAArBmB,MAAOC,EAAcpB,EAAdoB,KAAMC,EAAQrB,EAARqB,KACrBoE,EAAS1E,IAAa2E,UAAUxE,EAAOC,EAAOC,EAAMC,GAEtDiJ,EAAUrJ,SACVqJ,EAAUrJ,QAAQ0D,OAAO,MAG7B2F,EAAUrJ,QAAUF,IAAaC,aAC7BvD,EAAOwD,QACPF,IAAa+E,YAAYL,IAG7BhG,QAAQC,IAAI,UAEZ,UACaqM,EAAUtG,EAAQ1H,EAAMI,EAAM8M,GAAM,oGAE1C,CACHtL,QAAQ,EACRgM,QAAS,KAAEA,QACXxN,KAAM,OACT,0DAGR,gBA7BiB,sCA8BZ4N,EAAS,uCAAG,WAAOtG,EAAQ1H,EAAMiO,EAAgBf,GAAK,yEAK3C,OAJTgB,EAAW,KAEfxM,QAAQC,IAAI,MAEN0L,EAAO,uCAAG,wFAgBK,OAfjBa,EAAWD,EACXvM,QAAQC,IAAI,MAENvB,EAAO+B,OAAOC,KAAKC,IAAwB8L,eAAe5L,QAAO,SAACC,EAAOpC,GAE3E,OAD6BiC,IAAwB8L,cAAc/N,GAC1CwC,SAASqL,GACvB7N,EAGJoC,IACR,MAEHd,QAAQC,IAAI,MAENM,EAAWe,IAAa+E,YAAYL,GAC1ChG,QAAQC,IAAI,MAAK,SAEQZ,IAAuBgB,gBAAgB,CAC5DC,KAAM,CAACC,YACPC,GAAI,CAAC9B,KAAM,CAAC6N,MACd,OACe,GAJXG,EAAU,OAIhB1M,QAAQC,IAAI,OAERyM,EAAWjN,KAAKyJ,OAAO,CAAD,yCACf,CAAChJ,QAAQ,IAAM,QAET,OAAjBF,QAAQC,IAAI,MAAK,UAEX,IAAIqI,QAAO,uCAAC,WAAOC,EAASoE,GAAM,iFAGjB,OAFnB3M,QAAQC,IAAI,MAER2M,EAAa,GAAE,SACEzF,EAAiBmF,UAAU,CAC5CO,WAAYN,EACZO,GAAG,GAAD,OAAKvM,EAASkB,MAAK,YAAIlB,EAASoB,MAClCoL,GAAG,GAAD,OAAKxM,EAASmB,MAAK,YAAInB,EAASqB,MAClC4J,MAAOA,IACT,OACe,GANX9H,EAAM,OAMZ1D,QAAQC,IAAI,MAGPyD,EAAOwF,OAAO,CAAD,gCACR7J,IAAuB2N,OAAO,CAChC7H,WAAYrH,EACZyC,WACA7B,KAAK,GAAD,OAAK6N,KACV,KAAD,EACFhE,IAAS,QAEbvI,QAAQC,IAAI,MAEHiH,EAAI,EAAE,KAAD,QAAEA,EAAIxD,EAAOwF,QAAM,iBAkBR,OAlBQ,UAEnB+D,EAAQvJ,EAAOwD,GAEjBgG,EAAY,CACZf,QAAS7N,EAAKsB,GACduF,WAAYrH,EACZqP,aAAc,CACVrN,KAAMmN,EAAMnN,MAEhBsN,cAAeH,EAAMnN,KACrBuN,kBAAmBJ,EAAMK,SAASD,kBAClCE,oBAAqBN,EAAMO,OAC3BC,mBAAmB,EACnBC,WAAY,CAAChP,GACbiP,SAAUV,EAAMW,SAASC,KAAKF,SAC9BG,UAAWb,EAAMW,SAASC,KAAKC,WAEnC9N,QAAQC,IAAI,MAAK,UAEX,IAAIqI,SAAQ,SAAAC,GAAO,OAAIxC,WAAWwC,EAAS,QAAK,yBAE1BpB,EAAiB4G,YAAYb,EAAUK,qBAAoB,QAApE,OAAnBL,EAAUc,UAAS,iBAEQ7G,EAAiB8G,iBAAiBf,EAAUK,oBAAqB,CAAC,MAAO,UAAW,UAAS,SAAlHvF,EAAY,UAGdkF,EAAUgB,SAAsB,OAAZlG,QAAY,IAAZA,OAAY,EAAZA,EAAckG,UAAW,KAC7ChB,EAAUiB,4BAAyC,OAAZnG,QAAY,IAAZA,OAAY,EAAZA,EAAcoG,MAAO,KAC5DlB,EAAUjF,eAA4B,OAAZD,QAAY,IAAZA,OAAY,EAAZA,EAAcC,gBAAiB,MAE7DjI,QAAQC,IAAI,MAEZqB,IAAa+M,UACTrQ,EAAOwD,QACP,CAAC+D,IAAK2H,EAAUS,SAAUlI,IAAKyH,EAAUY,YAG7ClB,EAAU,sBAAOA,GAAU,CAAEM,IAAU,4EAEhCP,EAAO,CACVT,QAAS,KAAMA,WACjB,QA1CyBhF,IAAG,yCA8ChCoH,IAAaC,YAAY,CAACC,OAAQ5B,EAAW7D,QAAO,SAAAkE,GAAK,OAAIA,EAAMe,UAAU9E,YAAS,QAC3E,OAAjBlJ,QAAQC,IAAI,MAAK,UAEXZ,IAAuB2N,OAAO,CAChC7H,WAAYrH,EACZyC,WACA7B,KAAK,GAAD,OAAK6N,KACX,QAEFhE,IAAS,2DACZ,qDA/EgB,IA+Ef,4CACL,kBA7GY,qDAgHIoD,IAAS,iGAEf,CACHzL,QAAQ,EACRgM,QAAS,KAAMA,QACfxN,KAAM8N,IACT,yDAER,gBA7Hc,4CA+HT3O,EAAoB,uCAAG,WAAOmB,EAAQ6H,EAAgBpD,GAAU,iFAC5DpE,IAAuBoP,OAAO,CAChCtC,QAASnN,EACT0P,gBAAiB7H,EACjBrI,MAAOiF,IACT,2CACL,gBANyB,0CAQpBkL,EAAU,uCAAG,oGACOC,IAAe1P,KAAKpB,GAAU,OACjC,OADb2M,EAAO,OACbC,EAAWD,GAAQ,kBAEZA,GAAO,2CACjB,kBALe,mCAsBhB,OAfApJ,qBAAU,WACNsN,MACD,IAEHtN,qBAAU,WACNrB,QAAQC,IAAI4G,EAAgB,kBAC5B7G,QAAQC,IAAW,OAAPwK,QAAO,IAAPA,OAAO,EAAPA,EAASlK,SAAU,qBAC1BsG,IAA0B,OAAP4D,QAAO,IAAPA,OAAO,EAAPA,EAASlK,WAIjCuK,EAAQL,EAAQlK,YACjB,CAACsG,EAAuB,OAAP4D,QAAO,IAAPA,OAAO,EAAPA,EAASlK,WAIzB,6BACI,yBAAKsB,MAAO,CAACC,QAAS,OAAQC,IAAK,KAC/B,yBAAK8M,IAAKjE,EAAa/I,MAAO,CAACO,MAAO,MAAOsE,OAAQ,OACrD,yBAAK7E,MAAO,CAACO,MAAO,QAChB,kBAACwE,EAAmB,CAACC,eAAgBA,EAChBC,kBAAmBA,IACxC,yBAAKjF,MAAO,CAACiN,WAAY,KACpBjI,IAAmBnJ,EAAoB6B,QACpC,kBAAC5B,EAAa,CAACE,qBAAsBA,EACtBD,qBAAsBA,EACtBE,UAAWA,EACXC,WAAYA,EACZC,OAAQA,IAE1B6I,IAAmBnJ,EAAoBuJ,QACpC,kBAAC,EAAa,CAACnJ,UAAWA,EAAWyD,aAAcA,EAAcvD,OAAQA,KAGhF2M,GACG,yBAAKoE,MAAM,6BACNC,QAAQ,MAAM5M,MAAM,OAAOsE,OAAO,OAClCuI,QAAQ,eACT,0BAAMC,EAAE,IAAIC,EAAE,IAAI/M,MAAM,OAAOsE,OAAO,OAAO0I,KAAK,YAClD,2BACI,0BACIC,EAAE,+FACFD,KAAK,YACT,sCAAkBE,cAAc,YAAY5Q,KAAK,SAAS6Q,KAAK,UAAUC,GAAG,YAC1DC,IAAI,SAASC,YAAY,oBD7VtDvI,EACVpG,IAAM4O,oD,gGELIzL,EAAa,4CAyD7B,OAzD6B,uCAC9B,WAAsB,MAAO,YAAW,4BACxC,WAA+B,MAAO,qBAAoB,iBAC1D,WAAoB,MAAO,UAAS,qBACpC,WAAwB,MAAO,cAAa,eAC5C,WAAkB,MAAO,QAAO,gBAChC,WAAmB,MAAO,SAAQ,sBAClC,WAAyB,MAAO,eAAc,uBAC9C,WAA0B,MAAO,gBAAe,8BAChD,WAAiC,MAAO,uBAAsB,sBAC9D,WAAyB,MAAO,eAAc,kBAC9C,WAAqB,MAAO,WAAU,kBACtC,WAAqB,MAAO,WAAU,kBACtC,WAAqB,MAAO,WAAU,mBACtC,WAAsB,MAAO,YAAW,gBACxC,WAAmB,MAAO,SAAQ,yBAClC,WAA4B,MAAO,kBAAiB,iCAEpD,WACI,MAAO,KAEV,oCACD,WACI,MAAO,KAEV,2BACD,WACI,MAAO,KAEV,2BAED,WACI,MAAO,CACHA,EAAc0L,QACd1L,EAAc2L,iBACd3L,EAAc4L,MACd5L,EAAc6L,UACd7L,EAAc8L,IACd9L,EAAc+L,KACd/L,EAAcK,WACdL,EAAcgM,YACdhM,EAAcG,mBACdH,EAAciM,WACdjM,EAAckM,OACdlM,EAAcmM,OACdnM,EAAcoM,OACdpM,EAAcqM,QACdrM,EAAcsM,KACdtM,EAAcuM,iBAErB,gBAED,WACI,MAAM,GAAN,mBACOvM,EAAcwM,iBAAe,YAC7BxM,EAAcyM,sBAExB,EAzD6B,I,wLCClC,06MA2BoD,IAE/BrC,EAAY,4CA2E5B,OA3E4B,6EAC7B,WAAkBsC,GAAO,mFACA,OADEC,EAAM,+BAAG,GAAE,KACvBC,IAAU,SAAOC,IAAMC,IAAIC,YAA0BL,GAAU,CACtEC,SACAK,iBAAkB,SAAAL,GACd,OAAOvJ,IAAYC,UAAU4J,IAAMC,IAAI,CACnCP,EACA,CACIQ,QAAS,CAAC,cAAe,wBAAyB,SAAU,mBAAoB,yBAA0B,yCAIxH,uGACL,mDAb4B,IAa5B,yDAED,WAAkBR,GAAM,uFACEE,IAAMC,IAAIM,IAAsB,CAClDT,SACAK,iBAAkB,SAAAL,GACd,OAAOvJ,IAAYC,UAAU4J,IAAMC,IAAI,CACnCP,EACA,CACIQ,QAAS,CAAC,cAAe,wBAAyB,SAAU,mBAAoB,yBAA0B,yCAIvH,KAAD,EAGiE,OAb/DE,EAAS,QAaH9R,KAAO8R,EAAU9R,KAAKC,KAAI,SAAA8R,GAAK,OAAI,IAAIV,IAAWU,MAAO,kBAE5DD,GAAS,2CACnB,mDAnBA,IAmBA,2DAED,WAAoB9R,GAAI,iEACC,OADD,KACTqR,IAAU,SAAOC,IAAMU,KAAKC,IAAwBjS,GAAK,uGACvE,mDAJA,IAIA,gEAED,WAAyBA,GAAI,iEACJ,OADI,KACdqR,IAAU,SAAOC,IAAMU,KAAKE,IAA8BlS,GAAK,uGAC7E,mDAJA,IAIA,2DAED,WAAoBmR,EAASnR,GAAI,iEACR,OADQ,KAClBqR,IAAU,SAAOC,IAAMa,IAAIC,YAA4BjB,GAAUnR,GAAK,uGACpF,qDAJA,IAIA,2DAED,WAAoBmR,GAAO,iFACVG,IAAMe,OAAOC,YAA4BnB,IAAU,KAAD,8EAClE,mDAJA,IAIA,oEAGD,WAA6BA,EAASnR,GAAI,iFACzBsR,IAAMa,IAAII,YAAoCpB,GAAUnR,GAAM,KAAD,8EAC7E,qDALA,IAKA,qEAED,WAA8BmR,EAASqB,GAAU,iFAChClB,IAAMa,IAAIM,YAAmCtB,GAAU,CAACuB,YAAaF,IAAa,KAAD,8EACjG,qDAJA,IAIA,+DAED,WAAwBrB,EAASnR,GAAI,iFACpBsR,IAAMa,IAAIQ,YAAiCxB,GAAUnR,GAAM,KAAD,8EAC1E,qDAJA,IAIA,qEAED,WAA8BmR,GAAO,qFAAa,OAAXC,EAAM,+BAAG,GAAE,SACzBE,IAAMC,IAAIqB,YAAgCzB,GAAU,CACrEC,SACAK,iBAAkB,SAAAL,GACd,OAAOvJ,IAAYC,UAAU,2BACtBsJ,GAAM,IACTQ,QAAS,CAAC,qBAGpB,OARU,OAANiB,EAAM,yBAULA,EAAO7S,KAAKC,KAAI,SAAApB,GAAI,OAAI,IAAIiU,IAAUjU,OAAM,2CACtD,mDAdA,MAcA,EA3E4B,I,uFC9BZkU,EAAsB,4CAEC,OAFD,uCACvC,WAAsB,MAAO,YAAW,mBACxC,WAAsB,MAAO,cAAW,EAFD,I,uKCC3C,06MAyBoD,IAE/BvT,EAAW,4CAmD3B,OAnD2B,6EAC5B,WAAkB4R,GAAM,uFACCE,IAAMC,IAAIyB,IAAqB,CAChD5B,SACAK,iBAAkB,SAAAL,GACd,OAAOvJ,IAAYC,UAAU4J,IAAMC,IAAI,CACnCP,EACA,CACIQ,QAAS,CAAC,cAAe,wBAAyB,wBAAyB,yBAA0B,QAAS,oBAAqB,UAAW,8BAI3J,KAAD,EAE6D,OAZ3DjT,EAAQ,QAYHqB,KAAOrB,EAASqB,KAAKC,KAAI,SAAApB,GAAI,OAAI,IAAIiU,IAAUjU,MAAO,kBAExDF,GAAQ,2CAClB,mDAjB2B,IAiB3B,yDAED,WAAkBY,GAAM,mFACA,OADE6R,EAAM,+BAAG,GAAE,KACtB0B,IAAS,SAAOxB,IAAMC,IAAI0B,YAAyB1T,GAAS,CACnE6R,SACAK,iBAAkB,SAAAL,GACd,OAAOvJ,IAAYC,UAAU4J,IAAMC,IAAI,CACnCP,EACA,CACIQ,QAAS,CAAC,cAAe,wBAAyB,wBAAyB,yBAA0B,QAAS,oBAAqB,UAAW,8BAI5J,uGACL,mDAdA,IAcA,2DAED,WAAoB5R,GAAI,iEACA,OADA,KACT8S,IAAS,SAAOxB,IAAMU,KAAKkB,IAAuBlT,GAAK,uGACrE,mDAJA,IAIA,2DAED,WAAoBT,GAAM,iFACT+R,IAAMe,OAAOc,YAA2B5T,IAAQ,mFAChE,mDAJA,IAIA,2DAED,WAAoBA,EAAQS,GAAI,iEACR,OADQ,KACjB8S,IAAS,SAAOxB,IAAMa,IAAIiB,YAAyB7T,GAASS,GAAK,uGAC/E,qDAJA,IAIA,oEAED,WAA6BT,EAAQS,GAAI,iFACxBsR,IAAMa,IAAIkB,YAAmC9T,GAASS,GAAM,KAAD,8EAC3E,qDAJA,IAIA,qEAED,WAA8BT,EAAQiT,GAAU,iFAC/BlB,IAAMa,IAAImB,YAAkC/T,GAAS,CAACmT,YAAaF,IAAa,KAAD,8EAC/F,qDAJA,MAIA,EAnD2B,I,4LC3BhC,06MAcoD,IAG/B5S,EAAsB,4CAsCtC,OAtCsC,+EACvC,WAAoBI,GAAI,iFACPsR,IAAMU,KAAKuB,IAAoCvT,GAAM,KAAD,8EACpE,mDAHsC,IAGtC,kEAED,WAA2BwT,GAAG,iFACblC,IAAMU,KAAKyB,IAAgC,CAACD,QAAK,mFACjE,mDAJA,IAIA,2DAED,WAAoBxT,GAAI,iFACPsR,IAAMU,KAAK0B,IAAmD1T,GAAK,mFACnF,mDAJA,IAIA,oEAED,WAA6BoR,GAAM,iFAClBE,IAAMC,IAAIoC,IAA2C,CAC9DvC,SACAK,iBAAkB,SAAAL,GACd,OAAOvJ,IAAYC,UAAUsJ,MAEnC,mFACL,mDATA,IASA,kEAED,2FAAsD,OAA1B/S,EAAS,EAATA,UAAWY,EAAI,EAAJA,KAASmS,EAAM,0BAC5BE,IAAMC,IAAIyB,IAAqB,CACjD5B,SACAK,iBAAkB,SAAAL,GACd,OAAOvJ,IAAYC,UAAU,2BACtBsJ,GAAM,IACTnS,KAAMA,EACNyG,WAAYrH,EACZuT,QAAS,CAAC,qBAGpB,OAE6D,OAZ3DjT,EAAQ,QAYHqB,KAAOrB,EAASqB,KAAKC,KAAI,SAAApB,GAAI,OAAI,IAAIiU,IAAUjU,MAAO,kBAExDF,GAAQ,2CAClB,mDAlBA,MAkBA,EAtCsC,I,gKCjB3C,kmGAAA8I,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,ssDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,sQAC0C,IAErB5F,EAAY,4CAkP5B,OAlP4B,oDAG7B,SAA0BqM,EAAUG,GAChC,OAAOzG,MAAM,4DAAD,OAA6DsG,EAAQ,YAAIG,EAAS,qCAA6BpG,KAAK3G,MAC3HsS,MAAK,SAAAC,GAAG,OAAIA,EAAIhT,UAChB+S,MAAK,SAAA/U,GACF,GAAIA,EAAKsJ,QAAQ,GAAI,CACjB,MAA+BtJ,EAAKsJ,QAAQ,GAAGrH,SAASgT,SAAjDC,EAAS,EAATA,UAAWC,EAAS,EAATA,UAElB,MAAO,CACHhS,MAAO+R,EAAUjO,IACjB5D,KAAM6R,EAAU/N,IAChB/D,MAAO+R,EAAUlO,IACjB3D,KAAM6R,EAAUhO,KAIxB,OAAO,UAElB,mCAED,SAA6BkI,EAAUG,GACnC,OAAOzG,MAAM,4DAAD,OAA6DsG,EAAQ,YAAIG,EAAS,oCAA4BpG,KAAK3G,MAC1HsS,MAAK,SAAAC,GAAG,OAAIA,EAAIhT,UAChB+S,MAAK,SAAA5I,GACF,GAAIA,EAAQ7C,QAAQ,GAAI,CACpB,MAA+B6C,EAAQ7C,QAAQ,GAAGrH,SAASgT,SAApDC,EAAS,EAATA,UAAWC,EAAS,EAATA,UAElB,MAAO,CACHhS,MAAO+R,EAAUjO,IACjB5D,KAAM6R,EAAU/N,IAChB/D,MAAO+R,EAAUlO,IACjB3D,KAAM6R,EAAUhO,KAIxB,OAAO,UAElB,iEAED,WAA2BiO,GAAW,IAAF,4FAEtB,IAAIpL,SAAQ,SAAAC,GAAO,OAAIxC,WAAWwC,EAAS,QAAK,uBACnClJ,IAAuBmJ,cAAc,4GAAD,OAA6GkL,EAAS,gBAAQhM,KAAK3G,MAAM,OAAtL,OAAJ0H,EAAI,0BAEC,OAAJA,QAAI,IAAJA,OAAI,EAAJA,EAAM7I,IAAK6I,EAAO,MAAI,yDAEtB,MAAI,yDAElB,mDAXA,IAWA,gEAED,WAA0BC,GAAU,+EAE4C,GADxEG,EAAW,IACTC,GAA4B,OAAVJ,QAAU,IAAVA,OAAU,EAAVA,EAAYK,QAAO,SAACC,EAAGC,GAAK,OAAe,IAAVA,OAAgB,IAErDC,OAAO,CAAD,wCACf,IAAE,OAGJhC,EAAI,EAAE,KAAD,OAAEA,EAAI4B,EAAgBI,QAAM,iBACmB,OAAnDyK,EAAiB7K,EAAgB5B,GAAG0M,gBAAgB,EAAD,OACtClM,KAAK4B,aAAaqK,GAAe,QAA9ClL,EAAI,QAED7I,KACLiJ,EAAQ,sBAAOA,GAAQ,CAAEJ,EAAK7I,MACjC,QANuCsH,IAAG,gDASxC2B,GAAQ,iDAClB,mDApBA,IAoBA,6BAED,SAAwBgL,EAAS/L,GAAqB,IAC5CgM,EAAgB,CAClB,6BACA,gBACA,UACA,WACA,OACA,QACA,oBACA,qBACA,OACA,YAGEC,EAAqB,CACvBF,QAASA,EACT/L,OAAQA,GAAUgM,GAGtB,OAAOzM,MAAM,oEAAD,OAAqE0M,EAAmBF,QAAO,mBAAWE,EAAmBjM,OAAOC,KAAK,KAAI,gBAAQL,KAAK3G,MACjKsS,MAAK,SAAAC,GAAG,OAAIA,EAAIhT,UAChB+S,MAAK,SAAAC,GACF,MAAkB,OAAfA,EAAI1K,OACI0K,EAAI5J,OAGZ,CAAC,eAAgB,aAAaxI,SAASoS,EAAI1K,QACnC,KAGJ,CACH1I,QAAQ,EACRgM,QAASoH,EAAI1K,WAGpBoL,OAAO,SAAAC,GAAK,MAAK,CACd/T,QAAQ,EACRgM,QAAS+H,QAEpB,0BAED,SAAqBpD,GACjB,IAAMqD,EAAa,aACfnT,IAAK2G,KAAK3G,KACP8P,GAEDoC,EAAG,+DAA2D3L,IAAYC,UAAU2M,IAE1F,OAAO7M,MAAM4L,GACRI,MAAK,SAAAC,GAAG,OAAIA,EAAIhT,UAChB+S,MAAK,SAAAc,GACF,MAAwB,OAArBA,EAAUvL,OACFuL,EAGR,CAAC,eAAgB,aAAajT,SAASiT,EAAUvL,QACzC,KAGJ,CACH1I,QAAQ,EACRgM,QAASiI,EAAUvL,WAG1BoL,OAAO,SAAAC,GAAK,MAAK,CACd/T,QAAQ,EACRgM,QAAS+H,QAEpB,uBAED,SAAiBxS,EAAOC,EAAOC,EAAMC,GACjC,IAAMoE,EAAS,IAAIoF,OAAOC,OAAOC,KAAK8I,aAKtC,OAHApO,EAAOqO,OAAO,IAAIjJ,OAAOC,OAAOC,KAAKgJ,OAAO7S,EAAOE,IACnDqE,EAAOqO,OAAO,IAAIjJ,OAAOC,OAAOC,KAAKgJ,OAAO5S,EAAOE,IAE5CoE,IACV,uBAED,SAAiBtG,GAAwC,IAAnC6U,EAAQ,uDAAG,GAAIC,EAAI,uDAAG,KAAMC,EAAK,uCACnD,OAAO,IAAIrJ,OAAOC,OAAOC,KAAKoJ,OAAO,aACjCH,SAAUA,EACVC,OACA9U,OACG+U,MAEV,0BAED,SAAqB/U,EAAKsG,GAAqC,IAA7B2O,EAAK,uDAAG,OAAQF,EAAK,uDAAG,GAGtD,OAFAzU,QAAQC,IAAI,UAEL,IAAImL,OAAOC,OAAOC,KAAKsJ,UAAU,aACpCC,YAAaF,EACbG,cAAe,GACfC,aAAc,EACdC,UAAWL,EACXM,YAAa,IACbjP,OAAQA,EAAOkP,aAAe5T,EAAa+E,YAAYL,GAAUA,EACjEtG,OACG+U,MAEV,yBAED,SAAoB/U,EAAKyV,GAAmB,IAAbV,EAAK,uDAAG,GACnC,OAAO,IAAIrJ,OAAOC,OAAOC,KAAK8J,SAAS,aACnCP,YAAa,UACbC,cAAe,EACfC,aAAc,EACdM,UAAU,EACVF,OACAzV,OACG+U,MAEV,kCAED,WAA8C,IAAlBE,EAAK,uDAAG,QAC1BW,EAAe,8GACfC,EAAoB,IAAInK,OAAOC,OAAOC,KAAKkK,MAAM,GAAI,GAG3D,MAAO,CACHL,KAAMG,EACNG,OAAQ,IAAIrK,OAAOC,OAAOC,KAAKkK,MAAM,GAAI,IACzCP,YAAa,EACbD,UAAWL,EACXI,aAAc,EACdF,YAAa,QACba,MAAO,EACPC,YAAaJ,KAEpB,yBAED,SAAoBvP,GAChB,MAAO,CACHvE,MAAOuE,EAAOkP,eAAe3P,MAC7B7D,MAAOsE,EAAO4P,eAAerQ,MAC7B5D,KAAMqE,EAAOkP,eAAezP,MAC5B7D,KAAMoE,EAAO4P,eAAenQ,SAEnC,+BAED,SAA0B8D,GACtB,IAAMC,EAAO,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YAC5EC,EAAqB,KAEzB,OAAGF,EAEKE,EADuB,IAAxBF,EAAaL,aAA0C2M,IAA1BtM,EAAa,GAAGe,MACvBd,EAAK3I,QAAO,SAAC6I,EAAQU,GAAG,kCACtCV,GAAM,kBACRU,EAAM,CACHP,KAAM,QACNS,MAAO,aAEX,IAKaf,EAAa1I,QAAQ,SAAC6I,EAAQC,GAAQ,kCACpDD,GAAM,kBACRF,EAAKG,EAASE,KAAKO,KAAO,CACvBP,KAAK,GAAD,OAAKF,EAASE,KAAKiM,KAAKzL,MAAM,EAAG,GAAE,YAAIV,EAASE,KAAKiM,KAAKzL,MAAM,EAAG,IACvEC,MAAM,GAAD,OAAKX,EAASW,MAAMwL,KAAKzL,MAAM,EAAG,GAAE,YAAIV,EAASW,MAAMwL,KAAKzL,MAAM,EAAG,SAE9E,IAKDZ,MACV,EAlP4B,GAAZnI,EACVP,IAAM4O,2C,kHCFIxO,EAAkB,4CAmDlC,OAnDkC,qDACnC,SAA4BzC,GAAQ,IAAD,EAoB/B,OAnBa,mBACRwF,IAAc0L,QAAU,gEAAY,cACpC1L,IAAc2L,iBAAmB,mFAAgB,cACjD3L,IAAc4L,MAAQ,4BAAM,cAC5B5L,IAAc6L,UAAY,4BAAM,cAChC7L,IAAc8L,IAAM,4BAAM,cAC1B9L,IAAc+L,KAAO,kCAAO,cAC5B/L,IAAcgM,YAAc,+FAAkB,cAC9ChM,IAAcG,mBAAqB,4GAAqB,cACxDH,IAAciM,WAAa,8CAAS,cACpCjM,IAAckM,OAAS,wCAAQ,cAC/BlM,IAAcqM,QAAU,kCAAO,cAC/BrM,IAAcmM,OAAS,wCAAQ,cAC/BnM,IAAcoM,OAAS,kCAAO,cAC9BpM,IAAcsM,KAAO,4BAAM,cAC3BtM,IAAcK,WAAa,oDAAU,cACrCL,IAAcuM,cAAgB,uEAAc,GAGlC/R,IAAK,gBAAaA,KACpC,2CAED,SAAsCA,GAAQ,IAAD,EA0BzC,OAzBa,mBACRiC,IAAwB8P,cAAgB,mFAAgB,cACxD9P,IAAwBiP,QAAU,uHAAsB,cACxDjP,IAAwBkP,iBAAmB,+FAAkB,cAC7DlP,IAAwBoV,SAAW,4BAAM,cACzCpV,IAAwBsP,KAAO,kCAAO,cACtCtP,IAAwB4D,WAAa,oDAAU,cAC/C5D,IAAwBuP,YAAc,uEAAc,cACpDvP,IAAwBqV,SAAW,4GAAqB,cACxDrV,IAAwBsV,OAAS,kCAAO,cACxCtV,IAAwBuV,OAAS,sBAAK,cACtCvV,IAAwBwV,gCAAkC,0NAAyC,cACnGxV,IAAwByV,SAAW,oDAAU,cAC7CzV,IAAwB0V,OAAS,wCAAQ,cACzC1V,IAAwBsE,OAAS,8CAAS,cAC1CtE,IAAwB2V,WAAa,6EAAe,cACpD3V,IAAwB4V,kBAAoB,qGAAmB,cAC/D5V,IAAwB6V,eAAiB,2DAAY,cACrD7V,IAAwB4P,QAAU,kCAAO,cACzC5P,IAAwB8V,cAAgB,6EAAe,cACvD9V,IAAwB+V,OAAS,sBAAK,cACtC/V,IAAwBgW,cAAgB,qGAAmB,cAC3DhW,IAAwBiW,aAAe,mFAAgB,GAG7ClY,IAAK,gBAAaA,OACpC,EAnDkC,I,yGCDlBiC,EAAuB,4CAiEvC,OAjEuC,6CACxC,WAA2B,MAAO,kBAAgB,mBAClD,WAAqB,MAAO,YAAU,4BACtC,WAA8B,MAAO,qBAAmB,oBACxD,WAAsB,MAAO,aAAW,gBACxC,WAAkB,MAAO,SAAO,sBAChC,WAAwB,MAAO,eAAa,uBAC5C,WAAyB,MAAO,gBAAc,oBAC9C,WAAsB,MAAO,aAAW,kBACxC,WAAoB,MAAO,WAAS,kBACpC,WAAoB,MAAO,WAAS,2CACpC,WAA6C,MAAO,oCAAkC,oBACtF,WAAsB,MAAO,aAAW,kBACxC,WAAoB,MAAO,WAAS,kBACpC,WAAoB,MAAO,WAAS,sBACpC,WAAwB,MAAO,eAAa,6BAC5C,WAA+B,MAAO,sBAAoB,0BAC1D,WAA4B,MAAO,mBAAiB,mBACpD,WAAqB,MAAO,YAAU,yBACtC,WAA2B,MAAO,kBAAgB,kBAClD,WAAoB,MAAO,WAAS,yBACpC,WAA2B,MAAO,kBAAgB,wBAClD,WAA0B,MAAO,iBAAe,yBAEhD,WAA4B,IAAD,EACvB,OAAO,EAAP,iBACKuD,IAAc0L,QAAU,CAAC,QAAM,cAC/B1L,IAAc2L,iBAAmB,CAAC,QAAM,cACxC3L,IAAc6L,UAAY,CAAC,QAAM,cACjC7L,IAAc+L,KAAO,CAAC,QAAM,cAC5B/L,IAAcK,WAAa,CAAC,QAAM,cAClCL,IAAcgM,YAAc,CAAC,QAAM,cACnChM,IAAcG,mBAAqB,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,QAAM,cACpFH,IAAcoM,OAAS,CAAC,MAAO,MAAO,QAAM,cAC5CpM,IAAcqM,QAAU,CAAC,MAAO,QAAM,cACtCrM,IAAcsM,KAAO,CAAC,MAAO,MAAO,QAAM,cAC1CtM,IAAcuM,cAAgB,CAAC,QAAM,IAE7C,mBAED,WAAsB,IAAD,EACjB,OAAO,EAAP,iBACK9P,EAAwB8P,cAAgB,OAAK,cAC7C9P,EAAwBiP,QAAU,OAAK,cACvCjP,EAAwBkP,iBAAmB,OAAK,cAChDlP,EAAwBoV,SAAW,OAAK,cACxCpV,EAAwBsP,KAAO,OAAK,cACpCtP,EAAwB4D,WAAa,OAAK,cAC1C5D,EAAwBuP,YAAc,OAAK,cAC3CvP,EAAwBqV,SAAW,OAAK,cACxCrV,EAAwBsV,OAAS,OAAK,cACtCtV,EAAwBuV,OAAS,OAAK,cACtCvV,EAAwBwV,gCAAkC,OAAK,cAC/DxV,EAAwByV,SAAW,OAAK,cACxCzV,EAAwB0V,OAAS,OAAK,cACtC1V,EAAwBsE,OAAS,OAAK,cACtCtE,EAAwB2V,WAAa,OAAK,cAC1C3V,EAAwB4V,kBAAoB,OAAK,cACjD5V,EAAwB6V,eAAiB,OAAK,cAC9C7V,EAAwB4P,QAAU,OAAK,cACvC5P,EAAwB8V,cAAgB,OAAK,cAC7C9V,EAAwB+V,OAAS,OAAK,cACtC/V,EAAwBgW,cAAgB,OAAK,cAC7ChW,EAAwBiW,aAAe,OAAK,MAEpD,EAjEuC,I,uKCD5C,06MAsB6D,IAExChI,EAAc,4CA+C9B,OA/C8B,6EAC/B,WAAkBiC,GAAM,uFACIE,IAAMC,IAAI6F,IAAwB,CACtDhG,SACAK,iBAAkB,SAAAL,GACd,OAAOvJ,IAAYC,UAAU4J,IAAMC,IAAI,CACnCP,EACA,CACIQ,QAAS,CAAC,cAAe,wBAAyB,2BAA4B,WAAY,UAAW,8BAIlH,KAAD,EAE6E,OAZ3EyF,EAAW,QAYHrX,KAAOqX,EAAYrX,KAAKC,KAAK,SAAA+K,GAAO,OAAI,IAAIsM,IAAatM,MAAU,kBAExEqM,GAAW,2CACrB,mDAjB8B,IAiB9B,yDAED,WAAkBhZ,GAAS,mFACA,OADE+S,EAAM,+BAAG,GAAE,KACzBkG,IAAY,SAAOhG,IAAMC,IAAIgG,YAA4BlZ,GAAY,CAC5E+S,SACAK,iBAAkB,SAAAL,GACd,OAAOvJ,IAAYC,UAAU4J,IAAMC,IAAI,CACnCP,EACA,CACIQ,QAAS,CAAC,yBAA0B,wBAAyB,cAAe,wBAAyB,2BAA4B,WAAY,UAAW,8BAItK,uGACL,mDAdA,IAcA,2DAED,WAAoB5R,GAAI,iEACG,OADH,KACTsX,IAAY,SAAOhG,IAAMU,KAAKwF,IAA0BxX,GAAK,uGAC3E,mDAJA,IAIA,2DAED,WAAoB3B,EAAW2B,GAAI,iEACR,OADQ,KACpBsX,IAAY,SAAOhG,IAAMa,IAAIsF,YAA8BpZ,GAAY2B,GAAK,uGAC1F,qDAJA,IAIA,oEAED,WAA6B3B,EAAW2B,GAAI,iFAC3BsR,IAAMa,IAAIuF,YAAsCrZ,GAAY2B,GAAM,KAAD,8EACjF,qDAJA,IAIA,2DAED,WAAoB3B,GAAS,iFACZiT,IAAMe,OAAOsF,YAA8BtZ,IAAY,KAAD,8EACtE,mDAJA,MAIA,EA/C8B","file":"static/js/42.492dccae.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"typeWrapper\":\"PlaceTypes_typeWrapper__3CJs2\",\"typeWrapper__type\":\"PlaceTypes_typeWrapper__type__2qvtC\",\"active\":\"PlaceTypes_active__1sive\"};","export default class GenerationTypeEnums{\n    static get manual(){ return \"manual\" }\n    static get custom(){ return \"custom\" }\n}\n","/**\n * external libs\n */\nimport React, {useState, useEffect, useContext} from 'react';\nimport {Button, Input, Select} from 'antd';\n/**\n * utils\n */\nimport PlaceTypeTranslate from \"../../../../../../../utils/PlaceTypeTranslate\";\n/**\n * services\n */\nimport CityService from \"../../../../../../../services/admin/city.service\";\nimport GenerationPlaceService from \"../../../../../../../services/admin/generationPlace.service\";\n/**\n * enums\n */\nimport GenerationTypeEnums from \"../../../../../../../enums/GenerationType\";\nimport FoursquarePlaceTypeEnum from \"../../../../../../../enums/FoursquarePlaceType\";\n/**\n * context\n */\nimport {DictionaryContext} from \"../../../../../../context/dictionary.context\";\nimport GoogleClient from \"../../../../../../../utils/GoogleClient\";\n\nexport default function ManualContent({generatePlacesByCity, generationFinishCity, countryId, setLoading, mapRef}) {\n    const [countOfLimitSearch, setCountOfLimitSearch] = useState(0)\n    const [cityList, setCityList] = useState([])\n    const [city, setCity] = useState(null)\n    const [types, setTypes] = useState([])\n    const [type, setType] = useState(null)\n    const {dictionary} = useContext(DictionaryContext)\n\n    const getCity = async (cityId) => {\n        const city = await CityService.show(cityId)\n\n        await getType(city)\n        setCity(city)\n    }\n\n    const getCityList = async () => {\n        const {data} = await GenerationPlaceService.cityWhiteList({\n            countryId: countryId,\n            type: GenerationTypeEnums.manual,\n            per_page: 1000000\n        })\n\n        setCityList(data.map(({id, name}) => ({value: id, label: name})));\n    }\n\n    const startManualGenerate = async () => {\n        if (!city) {\n            return;\n        }\n\n        if(countOfLimitSearch > 50){\n            return;\n        }\n\n        console.log('HERE 1')\n\n        const {failed} = await generatePlacesByCity(city, [type], countOfLimitSearch)\n\n        setLoading(false)\n\n        if (failed) {\n            console.log('failed END')\n            return;\n        }\n\n        await generationFinishCity(city.id, GenerationTypeEnums.manual, dictionary.place_types.list.map(({value}) => value))\n\n        console.log(\"END\")\n    }\n\n    const getType = async (city) => {\n        const isGeneratedTypes = await GenerationPlaceService.generatedSquare({\n            json: {geometry: city.geometry},\n            eq: {\n                type: Object.keys(FoursquarePlaceTypeEnum.typeIds).reduce((accum, key) => ([\n                    ...accum,\n                    FoursquarePlaceTypeEnum.typeIds[key]\n                ]), [])\n            }\n        })\n\n        const uniqTypesId = isGeneratedTypes.data.map(({type}) => +type)\n\n        setTypes(Object.keys(FoursquarePlaceTypeEnum.typeIds).reduce((accum, key) => {\n            if(uniqTypesId.includes(FoursquarePlaceTypeEnum.typeIds[key])){\n                return accum\n            }\n\n            return [\n                ...accum,\n                {\n                    value: FoursquarePlaceTypeEnum.typeIds[key],\n                    label: PlaceTypeTranslate.getTranslateForFoursquareType([key])\n                }\n            ]\n        }, []))\n    }\n\n    useEffect(() => {\n        if (!city) {\n            return\n        }\n\n\n        GoogleClient.getRectangle(\n            mapRef.current,\n            {\n                north: city.geometry.north, //noth lat\n                south: city.geometry.south, //south lat\n                east: city.geometry.east, //noth lng\n                west: city.geometry.west, //south lng\n            },\n            \"#001529\"\n        )\n    }, [city])\n\n    useEffect(() => {\n        getCityList()\n    }, [])\n\n\n    if (!cityList) {\n        return null\n    }\n\n    return (\n        <div>\n            <div style={{display: \"flex\", gap: 10, alignItems: \"center\", marginBottom: -10}}>\n                <Button type=\"primary\"\n                        onClick={startManualGenerate}\n                        disabled={(city === null) || !type || !countOfLimitSearch}\n                        style={{width: \"100%\"}}>Manual\n                    generation</Button>\n            </div>\n            <div style={{margin: \"20px 0\"}}>\n                <Select\n                    size=\"large\"\n                    placeholder={\"Select city\"}\n                    options={cityList}\n                    showSearch={true}\n                    style={{minWidth: \"100%\"}}\n                    filterOption={(text, {value, label}) => {\n                        const textLowerCase = text.trim().toLowerCase()\n                        const labelLowerCase = label.toLowerCase()\n                        const valueLowerCase = value.toString().toLowerCase()\n                        return labelLowerCase.includes(textLowerCase) || valueLowerCase.includes(text)\n                    }}\n                    onChange={getCity}\n                />\n                {city && (\n                    <>\n                        <Select\n                            size=\"large\"\n                            placeholder={\"Select type\"}\n                            options={types}\n                            showSearch={true}\n                            style={{minWidth: \"100%\", marginTop: 8}}\n                            filterOption={(text, {value, label}) => {\n                                const textLowerCase = text.trim().toLowerCase()\n                                const labelLowerCase = label.toLowerCase()\n                                const valueLowerCase = value.toString().toLowerCase()\n                                return labelLowerCase.includes(textLowerCase) || valueLowerCase.includes(text)\n                            }}\n                            onChange={setType}\n                        />\n                        {type && (\n                            <Input\n                                placeholder=\"Count of search (max 50)...\"\n                                value={countOfLimitSearch}\n                                onChange={e => setCountOfLimitSearch(+e.target.value)}\n                                style={{marginTop: 8, display: 'block'}}\n                            />\n                        )}\n                    </>\n                )}\n            </div>\n        </div>\n    )\n}\n","/**\n * external libs\n */\nimport React, {useEffect, useRef, useState} from 'react';\n/**\n * styles\n */\nimport styles from \"./index.module.scss\";\n/**\n * utils\n */\nimport PlaceTypeTranslate from \"../../../../../../../utils/PlaceTypeTranslate\";\n\nexport default function Park({setPlaceTypes, placeTypes, places}) {\n    return (\n        <div className={styles.typeWrapper}>\n            {places.map( type => (\n                <div className={`${styles.typeWrapper__type} ${placeTypes === type && styles.active}`} onClick={() => setPlaceTypes(type)}>\n                    {PlaceTypeTranslate.getTranslateForType(type)}\n                </div>\n            ))}\n        </div>\n    )\n}\n","/**\n * external libs\n */\nimport React, {useEffect, useContext, useRef, useState} from 'react';\nimport {Button, Form, Radio} from 'antd';\n/**\n * components\n */\nimport PlaceType from \"../PlaceTypes\";\n/**\n * utils\n */\nimport PlaceTypeTranslate from \"../../../../../../../utils/PlaceTypeTranslate\";\nimport GoogleClient from \"../../../../../../../utils/GoogleClient\";\n/**\n * services\n */\nimport GenerationPlaceService from \"../../../../../../../services/admin/generationPlace.service\";\n/**\n * enums\n */\nimport PlaceTypeEnum from \"../../../../../../../enums/PlaceType\";\n/**\n * context\n */\nimport {DictionaryContext} from \"../../../../../../context/dictionary.context\";\n\nconst typeColor = {\n    [PlaceTypeEnum.amusement_park]: \"green\",\n    [PlaceTypeEnum.aquarium]: \"red\",\n    [PlaceTypeEnum.tourist_attraction]: \"gray\",\n    [PlaceTypeEnum.zoo]: \"black\",\n    [PlaceTypeEnum.restaurant]: \"blue\",\n}\n\nexport default function AutomaticContent({getRectangle, countryId, mapRef}) {\n    const {dictionary} = useContext(DictionaryContext)\n    const [placeTypes, setPlaceTypes] = useState(null)\n    const [geometry, setGeometry] = useState(null)\n    const rectangle = useRef(null)\n    const timeOutId = useRef(null)\n    const allGeneratedSquare = useRef([])\n\n    const generateSquareByGeometry = async () => {\n        //KIYV\n        GoogleClient.getRectangle(\n            mapRef.current,\n            {\n                north: 50.590798, //noth lat\n                south: 50.213273, //south lat\n                east: 30.825941, //noth lng\n                west: 30.2394401, //south lng\n            }\n        )\n\n        // const {failed, message, type} = await getRectangle(\n        //     {\n        //         geometry,\n        //         cityId: null,\n        //         placeTypes: placeTypes\n        //     }\n        // )\n        //\n        // if (failed) {\n        //     // socket.emit('pushLog', {\n        //     //     success: false,\n        //     //     cityId: city.id,\n        //     //     geometry_square: {\n        //     //       ...geometry\n        //     //     },\n        //     //     message,\n        //     //     type,\n        //     // });\n        //\n        //     return {failed: true}\n        // }\n\n        // rectangle.current.setOptions({\n        //     editable: false,\n        //     draggable: false,\n        // })\n    }\n\n    const drawRec = () => {\n        const center = mapRef.current.getCenter();\n        const maxHorizontalDif = 0.4;\n        const maxVerticalDif = 0.6;\n\n        const squareSize = {\n            north: center.lat() + maxHorizontalDif / 2, //noth lat\n            south: center.lat() - maxHorizontalDif / 2, //south lat\n            east: center.lng() + maxVerticalDif / 2, //noth lng = 0.05\n            west: center.lng() - maxVerticalDif / 2, //south lng = 0.05\n        };\n\n        rectangle.current = GoogleClient.getRectangle(\n            mapRef.current,\n            squareSize,\n            \"blue\",\n            {\n                draggable: true,\n                editable: true,\n            }\n        )\n\n        rectangle.current.addListener(\"bounds_changed\", () => {\n            clearTimeout(timeOutId.current);\n            timeOutId.current = setTimeout(() => {\n                const bounds = rectangle.current.getBounds()\n                const center = bounds.getCenter();\n                const centerHorizontalLat = center.lat();\n                const centerVerticalLng = center.lng();\n\n                let newGeometry = GoogleClient.parseBounds(bounds)\n\n                if (geometry && geometry.north === newGeometry.north && geometry.east === newGeometry.east && geometry.west === newGeometry.west && geometry.south === newGeometry.south) {\n                    return;\n                }\n\n                const difHorizontal = newGeometry.north - newGeometry.south;\n                const difVertical = newGeometry.east - newGeometry.west;\n\n                const errorDifHorizontal = maxHorizontalDif < difHorizontal;\n                const errorDifVertical = maxVerticalDif < difVertical;\n\n                if (errorDifHorizontal) {\n                    newGeometry = {\n                        ...newGeometry,\n                        north: centerHorizontalLat - maxHorizontalDif / 2,\n                        south: centerHorizontalLat + maxHorizontalDif / 2,\n                    }\n                }\n                if (errorDifVertical) {\n                    newGeometry = {\n                        ...newGeometry,\n                        west: centerVerticalLng - maxVerticalDif / 2,\n                        east: centerVerticalLng + maxVerticalDif / 2,\n                    }\n                }\n\n                if (errorDifHorizontal || errorDifVertical) {\n                    setGeometry(newGeometry)\n                    rectangle.current.setOptions({\n                        bounds: newGeometry\n                    })\n                }\n            }, 500);\n        });\n    }\n\n    const close = () => {\n\n    }\n\n    const drawSquareByPlaceType = async () => {\n        if (!placeTypes) {\n            return;\n        }\n\n        allGeneratedSquare.current.forEach((square) => {\n            square.setMap(null)\n        })\n\n        const {data} = await GenerationPlaceService.generatedSquare({\n            country_id: countryId,\n            type: placeTypes,\n            per_page: 1000000,\n        });\n\n\n        allGeneratedSquare.current = data.map(({geometry}) => (\n            GoogleClient.getRectangle(\n                mapRef.current,\n                geometry\n            )\n        ))\n    }\n\n    useEffect(() => {\n        drawSquareByPlaceType()\n    }, [placeTypes])\n\n    return (\n        <div>\n            <div style={{display: \"flex\", gap: 10, alignItems: \"center\"}}>\n                <Button type=\"primary\" onClick={generateSquareByGeometry} style={{width: \"100%\"}}>Custom\n                    generation</Button>\n                <Button type=\"primary\" onClick={drawRec} style={{width: \"100%\"}}>Draw</Button>\n                <Button type=\"primary\" onClick={close} style={{width: \"100%\"}}>close</Button>\n            </div>\n            <PlaceType places={dictionary.place_types.list.map(({value}) => value)}\n                       setPlaceTypes={setPlaceTypes}\n                       placeTypes={placeTypes}\n            />\n            <div style={{display: \"flex\", flexDirection: \"column\", gap: 15, marginBottom: 10}}>\n                {Object.keys(typeColor).map(type => (\n                    <div style={{display: \"flex\", alignItems: \"center\"}}>\n                        <div style={{width: 10, height: 10, backgroundColor: typeColor[type]}}/>\n                        <span> :{PlaceTypeTranslate.getTranslateForType(type)}</span>\n                    </div>\n                ))}\n            </div>\n        </div>\n    )\n}\n","/**\n * external libs\n */\nimport React, { useState } from 'react';\nimport { Radio } from 'antd';\n/**\n * enums\n */\nimport GenerationTypeEnums from \"../../../../../../../enums/GenerationType\";\n\nexport default function RadioGenerationType({generationType, setGenerationType}){\n    return (\n        <Radio.Group onChange={e => setGenerationType(e.target.value)} defaultValue={generationType}>\n            <Radio value={GenerationTypeEnums.manual}>Manual</Radio>\n            <Radio value={GenerationTypeEnums.custom}>Custom</Radio>\n        </Radio.Group>\n    )\n}\n","import GenerationPlaceService from \"../services/admin/generationPlace.service\";\nimport ExcursionRouteTypeEnum from \"../enums/ExcursionRouteType\";\nimport {QueryString} from \"./Querystring\";\n\nexport default class FoursquareClient {\n    static key = process.env.REACT_APP_FOURSQUARE_API\n\n    static async getPlaces (searchParams = {}){\n        // categories=${foursquareType}&ne=52.3679992%2C21.2710984&sw=52.0978767%2C20.8512898&limit=${limit}\n\n        try {\n            const {results} = await (await fetch(`https://api.foursquare.com/v3/places/search?${QueryString.stringify(searchParams)}`, {\n                headers: {\n                    Authorization: this.key,\n                    accept: 'application/json'\n                }\n            })).json()\n\n            return results\n\n        } catch (e) {\n            return []\n        }\n    }\n\n    static async getPlacesDetails (foursquarePlaceId, fields = []){\n        try {\n            const placeDetails = await (await fetch(`https://api.foursquare.com/v3/places/${foursquarePlaceId}?${QueryString.stringify({fields: fields.join(\",\")})}`, {\n                headers: {\n                    Authorization: this.key,\n                    accept: 'application/json'\n                }\n            })).json()\n\n            console.log(placeDetails, \"placeDetails\")\n\n            placeDetails.opening_hours = this.parseOpeningHours(placeDetails.hours.regular)\n            delete placeDetails.hours;\n\n            return placeDetails\n        } catch (e) {\n            return null\n        }\n    }\n\n    static async getPhotoFile (photoUrl){\n        try {\n            await new Promise(resolve => setTimeout(resolve, 400))\n            const file = await GenerationPlaceService.downloadImage(photoUrl)\n\n            return file?.id ? file : null;\n        } catch (e) {\n            return null\n        }\n    }\n\n    static async getPhotosId( foursquarePlaceId ){\n        let photosList = [];\n        let photos =  await fetch(`https://api.foursquare.com/v3/places/${foursquarePlaceId}/photos`, {\n            headers: {\n                Authorization: this.key,\n                accept: 'application/json'\n            }\n        })\n\n        if(photos.status === 200){\n            photosList = await photos.json()\n        }else{\n            return []\n        }\n\n        let filesIds = [];\n        const shortPhotosList = photosList?.filter((_, index) => index < 3) || [];\n\n        if(!shortPhotosList.length) {\n            return []\n        }\n\n        for (let i = 0; i < shortPhotosList.length; i++) {\n            const photo = shortPhotosList[i];\n            const photoUrl = `${photo.prefix}original${photo.suffix}`\n\n\n            await new Promise(resolve => setTimeout(resolve, 400))\n            const file = await this.getPhotoFile(photoUrl)\n\n            if (file?.id) {\n                filesIds = [...filesIds, file.id]\n            }\n        }\n\n        return filesIds\n    }\n\n    static parseOpeningHours( openingHours ){\n        const days = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"]\n        let formatOpeningHours = null\n\n        if(openingHours){\n            formatOpeningHours = openingHours.reduce( (result, openHour) => {\n                const openTimeSplit = openHour.open.split('+')\n                const closeTimeSplit = openHour.open.split('+')\n                const openTimeFormat = openTimeSplit.length === 1 ? openTimeSplit[0] : openTimeSplit[1]\n                const closeTimeFormat = closeTimeSplit.length === 1 ? closeTimeSplit[0] : closeTimeSplit[1]\n                const openTime = openTimeFormat === \"2359\" ? \"0000\" : openTimeFormat\n                const closeTime = closeTimeFormat === \"2359\" ? \"0000\" : closeTimeFormat\n\n                return {\n                    ...result,\n                    [days[openHour.day - 1]]: {\n                        open: `${openTime.slice(0, 2)}:${openTime.slice(2, 4)}`,\n                        close: `${closeTime.slice(0, 2)}:${closeTime.slice(2, 4)}`,\n                    }\n                }\n            }, {})\n\n            return formatOpeningHours\n        }\n\n        return formatOpeningHours\n    }\n\n}\n","/**\n * external libs\n */\nimport React, {useContext, useEffect, useRef, useState} from 'react';\nimport {useParams} from \"react-router-dom\";\n/**\n * components\n */\nimport ManualContent from './components/ManualContent'\nimport CustomContent from './components/CustomContent'\nimport RadioGenerationType from './components/RadioGenerationType'\n/**\n * enums\n */\nimport GenerationTypeEnums from \"../../../../../enums/GenerationType\";\nimport FoursquarePlaceTypeEnum from \"../../../../../enums/FoursquarePlaceType\";\n/**\n * service\n */\nimport GenerationPlaceService from \"../../../../../services/admin/generationPlace.service\";\nimport SightService from \"../../../../../services/admin/sight.service\";\nimport CountryService from \"../../../../../services/admin/country.service\";\n/**\n * utils\n */\nimport GoogleClient from \"../../../../../utils/GoogleClient\";\nimport FoursquareClient from \"../../../../../utils/FoursquareClient\";\n\nexport default function GeneratePlace() {\n    const {countryId} = useParams();\n    const [generationType, setGenerationType] = useState(GenerationTypeEnums.manual)\n    const [country, setCountry] = useState(null)\n    const [loading, setLoading] = useState(false)\n    const mapBlockRef = useRef(null);\n    const squareRef = useRef(null);\n    const mapRef = useRef(null);\n\n    console.log(country, \"country\")\n\n    const mapInit = async (geometry = {}) => {\n        const opt = {\n            center: {lat: 51.514316, lng: -0.129761},\n            zoom: 4,\n            restriction: {\n                latLngBounds: {\n                    ...geometry\n                },\n                strictBounds: true\n            },\n        }\n\n\n        mapRef.current = new window.google.maps.Map(mapBlockRef.current, opt)\n    }\n\n    const generatePlacesByCity = async (city, placeTypes = [], limit) => {\n        setLoading(true)\n        console.log('HERE 2')\n        if (!city.geometry || !placeTypes.length) {\n            return {failed: false};\n        }\n        console.log('HERE 3')\n        let currentI = 1;\n        let currentJ = 1;\n\n        const forLoop = async _ => {\n            for (let i = 0; i < placeTypes.length; i++) {\n                const currentType = placeTypes[i];\n\n                //Берем колл-во квадратов по которым ходим. Есть значения захардкодженые, а есть с базы\n                let countStep = 1;\n\n                //Ширина и Высота квадрата по которому идем (сити геометрия)\n                const placeHeightCoordinate = city.geometry.north - city.geometry.south;\n                const placeWidthCoordinate = city.geometry.east - city.geometry.west;\n\n                //Делим этот квадрат (сити геометрию) на колл-во шагов\n                const stepHorizontal = placeWidthCoordinate / countStep;\n                const stepVertical = placeHeightCoordinate / countStep;\n                console.log('HERE 4')\n\n                currentI = 1;\n                for (currentI; currentI <= countStep; currentI++) {\n                    currentJ = 1;\n                    for (currentJ; currentJ <= countStep; currentJ++) {\n\n                        await new Promise(resolve => setTimeout(resolve, 500))\n\n                        //Берем один текузий квадрат\n                        const {failed, message, type} = await getRectangle(\n                            {\n                                geometry: {\n                                    north: city.geometry.south + (stepVertical * currentI),\n                                    east: city.geometry.west + (stepHorizontal * currentJ),\n                                    south: city.geometry.south + (stepVertical * (currentI - 1)),\n                                    west: city.geometry.west + (stepHorizontal * (currentJ - 1)),\n                                },\n                                city: city,\n                                type: currentType,\n                                limit,\n                            }\n                        )\n\n                        console.log('HERE 5')\n\n                        if (failed) {\n                            return {failed: true}\n                        }\n                    }\n                }\n            }\n            console.log('HERE 6')\n\n            if (squareRef.current) {\n                squareRef.current.setMap(null)\n            }\n\n            return {failed: false}\n        }\n\n        try {\n            return await forLoop()\n        } catch (e) {\n            if (squareRef.current) {\n                squareRef.current.setMap(null)\n            }\n\n            return {\n                failed: true,\n                city_id: city.id,\n                message: e.message,\n                type: null,\n                indexI: currentI,\n                indexJ: currentJ,\n            };\n        }\n    }\n    const getRectangle = async ({geometry, city, type, limit, countStep}) => {\n        try {\n            //Получение геометрии квадрата, его отрисовка на UI\n            console.log('HERE 7')\n\n            const {north, south, east, west} = geometry;\n            const bounds = GoogleClient.getBounds(north, south, east, west)\n\n            if (squareRef.current) {\n                squareRef.current.setMap(null)\n            }\n\n            squareRef.current = GoogleClient.getRectangle(\n                mapRef.current,\n                GoogleClient.parseBounds(bounds)\n            );\n\n            console.log('HERE 8')\n\n            //После получения и отрисовски всех данных идем получать плейсы\n            return await getPlaces(bounds, city, type, limit)\n        } catch (e) {\n            return {\n                failed: true,\n                message: e.message,\n                type: null\n            }\n        }\n\n    }\n    const getPlaces = async (bounds, city, foursquareType, limit) => {\n        let lastType = null;\n\n        console.log('10')\n\n        const forLoop = async () => {\n            lastType = foursquareType\n            console.log('11')\n\n            const type = Object.keys(FoursquarePlaceTypeEnum.typeOriginIds).reduce((accum, type) => {\n                const foursquareIdsForType = FoursquarePlaceTypeEnum.typeOriginIds[type]\n                if (foursquareIdsForType.includes(foursquareType)) {\n                    return type\n                }\n\n                return accum\n            }, null)\n\n            console.log('12')\n\n            const geometry = GoogleClient.parseBounds(bounds)\n            console.log('13')\n\n            const isGenerate = await GenerationPlaceService.generatedSquare({\n                json: {geometry},\n                eq: {type: [foursquareType]}\n            })\n            console.log('14')\n\n            if (isGenerate.data.length) {\n                return {failed: false};\n            }\n            console.log('15')\n\n            await new Promise(async (resolve, reject) => {\n                console.log('16')\n\n                let placesToDB = []\n                const places = await FoursquareClient.getPlaces({\n                    categories: foursquareType,\n                    ne: `${geometry.north},${geometry.east}`,\n                    sw: `${geometry.south},${geometry.west}`,\n                    limit: limit\n                })\n                console.log('17')\n\n\n                if (!places.length) {\n                    await GenerationPlaceService.create({\n                        country_id: countryId,\n                        geometry,\n                        type: `${foursquareType}`\n                    });\n                    resolve()\n                }\n                console.log('18')\n\n                for (let i = 0; i < places.length; i++) {\n                    try {\n                        const place = places[i]\n\n                        let placeToBd = {\n                            city_id: city.id,\n                            country_id: countryId,\n                            translatable: {\n                                name: place.name\n                            },\n                            original_name: place.name,\n                            formatted_address: place.location.formatted_address,\n                            foursquare_place_id: place.fsq_id,\n                            check_coordinates: false,\n                            place_type: [type],\n                            latitude: place.geocodes.main.latitude,\n                            longitude: place.geocodes.main.longitude,\n                        }\n                        console.log('19')\n\n                        await new Promise(resolve => setTimeout(resolve, 200))\n\n                        placeToBd.files_ids = await FoursquareClient.getPhotosId(placeToBd.foursquare_place_id)\n\n                        const placeDetails = await FoursquareClient.getPlacesDetails(placeToBd.foursquare_place_id, [\"tel\", \"website\", \"hours\"])\n\n                        if (placeDetails) {\n                            placeToBd.website = placeDetails?.website || null;\n                            placeToBd.international_phone_number = placeDetails?.tel || null;\n                            placeToBd.opening_hours = placeDetails?.opening_hours || null;\n                        }\n                        console.log('20')\n\n                        GoogleClient.getMarker(\n                            mapRef.current,\n                            {lat: placeToBd.latitude, lng: placeToBd.longitude},\n                        )\n\n                        placesToDB = [...placesToDB, placeToBd]\n                    } catch (error) {\n                        return reject({\n                            message: error.message,\n                        })\n                    }\n                }\n\n                await SightService.createBatch({sights: placesToDB.filter(place => place.files_ids.length)})\n                console.log('21')\n\n                await GenerationPlaceService.create({\n                    country_id: countryId,\n                    geometry,\n                    type: `${foursquareType}`\n                })\n\n                resolve()\n            })\n        }\n\n        try {\n            return await forLoop()\n        } catch (error) {\n            return {\n                failed: true,\n                message: error.message,\n                type: lastType\n            };\n        }\n    }\n\n    const generationFinishCity = async (cityId, generationType, placeTypes) => {\n        await GenerationPlaceService.finish({\n            city_id: cityId,\n            generation_type: generationType,\n            types: placeTypes\n        })\n    }\n\n    const getCountry = async () => {\n        const country = await CountryService.show(countryId)\n        setCountry(country)\n\n        return country\n    }\n\n    useEffect(() => {\n        getCountry()\n    }, [])\n\n    useEffect(() => {\n        console.log(generationType, \"generationType\")\n        console.log(country?.geometry, \"country?.geometry\")\n        if (!generationType || !country?.geometry) {\n            return;\n        }\n\n        mapInit(country.geometry)\n    }, [generationType, country?.geometry])\n\n\n    return (\n        <div>\n            <div style={{display: \"flex\", gap: 50}}>\n                <div ref={mapBlockRef} style={{width: \"70%\", height: 500}}/>\n                <div style={{width: \"30%\"}}>\n                    <RadioGenerationType generationType={generationType}\n                                         setGenerationType={setGenerationType}/>\n                    <div style={{paddingTop: 20}}>\n                        {generationType === GenerationTypeEnums.manual && (\n                            <ManualContent generationFinishCity={generationFinishCity}\n                                           generatePlacesByCity={generatePlacesByCity}\n                                           countryId={countryId}\n                                           setLoading={setLoading}\n                                           mapRef={mapRef}/>\n                        )}\n                        {generationType === GenerationTypeEnums.custom && (\n                            <CustomContent countryId={countryId} getRectangle={getRectangle} mapRef={mapRef}/>\n                        )}\n                    </div>\n                    {loading && (\n                        <svg xmlns=\"http://www.w3.org/2000/svg\"\n                             version=\"1.0\" width=\"64px\" height=\"64px\"\n                             viewBox=\"0 0 128 128\" >\n                            <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"#f0f2f5\"/>\n                            <g>\n                                <path\n                                    d=\"M64 128A64 64 0 0 1 18.34 19.16L21.16 22a60 60 0 1 0 52.8-17.17l.62-3.95A64 64 0 0 1 64 128z\"\n                                    fill=\"#000000\"/>\n                                <animateTransform attributeName=\"transform\" type=\"rotate\" from=\"0 64 64\" to=\"360 64 64\"\n                                                  dur=\"1400ms\" repeatCount=\"indefinite\"/>\n                            </g>\n                        </svg>\n                    )}\n                </div>\n            </div>\n        </div>\n    )\n}\n","export default class PlaceTypeEnum{\n    static get reserve(){ return \"reserve\" }\n    static get botanical_garden(){ return \"botanical_garden\" }\n    static get beach(){ return \"beach\" }\n    static get mountains(){ return \"mountains\" }\n    static get sea(){ return \"sea\" }\n    static get lake(){ return \"lake\" }\n    static get restaurant(){ return \"restaurant\" }\n    static get art_gallery(){ return \"art_gallery\" }\n    static get tourist_attraction(){ return \"tourist_attraction\" }\n    static get campground(){ return \"campground\" }\n    static get church(){ return \"church\" }\n    static get mosque(){ return \"mosque\" }\n    static get museum(){ return \"museum\" }\n    static get theater(){ return \"theater\" }\n    static get park(){ return \"park\" }\n    static get place_of_view(){ return \"place_of_view\" }\n\n    static get googleTypesListManual(){\n        return [\n        ]\n    }\n    static get googleTypesListAutomatic(){\n        return [\n        ]\n    }\n    static get googleTypesList(){\n        return [\n        ]\n    }\n\n    static get customTypesList(){\n        return [\n            PlaceTypeEnum.reserve,\n            PlaceTypeEnum.botanical_garden,\n            PlaceTypeEnum.beach,\n            PlaceTypeEnum.mountains,\n            PlaceTypeEnum.sea,\n            PlaceTypeEnum.lake,\n            PlaceTypeEnum.restaurant,\n            PlaceTypeEnum.art_gallery,\n            PlaceTypeEnum.tourist_attraction,\n            PlaceTypeEnum.campground,\n            PlaceTypeEnum.church,\n            PlaceTypeEnum.mosque,\n            PlaceTypeEnum.museum,\n            PlaceTypeEnum.theater,\n            PlaceTypeEnum.park,\n            PlaceTypeEnum.place_of_view,\n        ]\n    }\n\n    static get list(){\n        return [\n            ...PlaceTypeEnum.customTypesList,\n            ...PlaceTypeEnum.googleTypesList,\n        ]\n    }\n}\n","/**\n *service\n */\nimport axios from 'axios'\nimport merge from 'deepmerge'\n/**\n * const\n */\nimport {\n    API_ADMIN_SIGHT_CREATE, API_ADMIN_SIGHT_CREATE_BATCH,\n    API_ADMIN_SIGHT_LIST,\n    API_MAKE_ADMIN_SIGHT_CHANGE_STATUS,\n    API_MAKE_ADMIN_SIGHT_DELETE,\n    API_MAKE_ADMIN_SIGHT_GET_CITIES,\n    API_MAKE_ADMIN_SIGHT_NEED_REVIEW,\n    API_MAKE_ADMIN_SIGHT_SHOW,\n    API_MAKE_ADMIN_SIGHT_TRANSLATE_CREATE,\n    API_MAKE_ADMIN_SIGHT_TRANSLATE_EDIT,\n    API_MAKE_ADMIN_SIGHT_UPDATE,\n} from \"../../constants/admin/api.constant\";\n/**\n * utils\n */\nimport {QueryString} from \"../../utils/Querystring\";\n/**\n * model\n */\nimport SightModel from \"../../model/Sight/sight.model\";\nimport CityModel from \"../../model/City/city.model\";\n\nexport default class SightService {\n    static async show(sightId, params = {}) {\n        return new SightModel(await axios.get(API_MAKE_ADMIN_SIGHT_SHOW(sightId), {\n            params,\n            paramsSerializer: params => {\n                return QueryString.stringify(merge.all([\n                    params,\n                    {\n                        include: [\"translation\", \"translations.language\", \"images\", \"city.translation\", \"city.state.translation\", \"city.state.country.translation\"],\n                    }\n                ]))\n            }\n        }));\n    }\n\n    static async list(params) {\n        let sightList = await axios.get(API_ADMIN_SIGHT_LIST, {\n            params,\n            paramsSerializer: params => {\n                return QueryString.stringify(merge.all([\n                    params,\n                    {\n                        include: [\"translation\", \"translations.language\", \"images\", \"city.translation\", \"city.state.translation\", \"city.state.country.translation\"],\n                    }\n                ]))\n            }\n        });\n\n\n        sightList.data = sightList.data.map(sight => new SightModel(sight))\n\n        return sightList;\n    }\n\n    static async create(data) {\n        return new SightModel(await axios.post(API_ADMIN_SIGHT_CREATE, data));\n    }\n\n    static async createBatch(data) {\n        return new SightModel(await axios.post(API_ADMIN_SIGHT_CREATE_BATCH, data));\n    }\n\n    static async update(sightId, data) {\n        return new SightModel(await axios.put(API_MAKE_ADMIN_SIGHT_UPDATE(sightId), data));\n    }\n\n    static async delete(sightId) {\n        return await axios.delete(API_MAKE_ADMIN_SIGHT_DELETE(sightId));\n    }\n\n\n    static async updateTranslate(sightId, data) {\n        return await axios.put(API_MAKE_ADMIN_SIGHT_TRANSLATE_EDIT(sightId), data);\n    }\n\n    static async updateWorkStatus(sightId, workStatus) {\n        return await axios.put(API_MAKE_ADMIN_SIGHT_CHANGE_STATUS(sightId), {work_status: workStatus});\n    }\n\n    static async needReview(sightId, data) {\n        return await axios.put(API_MAKE_ADMIN_SIGHT_NEED_REVIEW(sightId), data);\n    }\n\n    static async getCitiesBySight(sightId, params = {}) {\n        const cities = await axios.get(API_MAKE_ADMIN_SIGHT_GET_CITIES(sightId), {\n            params,\n            paramsSerializer: params => {\n                return QueryString.stringify({\n                    ...params,\n                    include: ['translation']\n                })\n            }\n        })\n\n        return cities.data.map(city => new CityModel(city));\n    }\n}\n\n\n\n\n\n","export default class ExcursionRouteTypeEnum{\n    static get walking(){ return \"walking\" }\n    static get driving(){ return \"driving\" }\n}\n","/**\n *service\n */\nimport axios from 'axios'\nimport merge from 'deepmerge'\n/**\n * const\n */\nimport {\n    API_ADMIN_CITY_CREATE,\n    API_MAKE_ADMIN_CITY_DELETE,\n    API_ADMIN_CITY_LIST,\n    API_MAKE_ADMIN_CITY_TAXI_CREATE,\n    API_MAKE_ADMIN_CITY_SHOW,\n    API_MAKE_ADMIN_CITY_EDIT,\n    API_MAKE_ADMIN_CITY_TAXI_EDIT,\n    API_MAKE_ADMIN_CITY_TRANSLATE_EDIT,\n    API_MAKE_ADMIN_CITY_CHANGE_STATUS,\n} from \"../../constants/admin/api.constant\";\n/**\n * utils\n */\nimport {QueryString} from \"../../utils/Querystring\";\n/**\n * model\n */\nimport CityModel from \"../../model/City/city.model\";\n\nexport default class CityService {\n    static async list(params) {\n        let cityList = await axios.get(API_ADMIN_CITY_LIST, {\n            params,\n            paramsSerializer: params => {\n                return QueryString.stringify(merge.all([\n                    params,\n                    {\n                        include: [\"translation\", \"translations.language\", \"portraitImageRelation\", \"landscapeImageRelation\", \"state\", \"state.translation\", \"country\", \"country.translation\"]\n                    }\n                ]))\n            }\n        });\n\n        cityList.data = cityList.data.map(city => new CityModel(city));\n\n        return cityList;\n    }\n\n    static async show(cityId, params = {}) {\n        return new CityModel(await axios.get(API_MAKE_ADMIN_CITY_SHOW(cityId), {\n            params,\n            paramsSerializer: params => {\n                return QueryString.stringify(merge.all([\n                    params,\n                    {\n                        include: [\"translation\", \"translations.language\", \"portraitImageRelation\", \"landscapeImageRelation\", \"state\", \"state.translation\", \"country\", \"country.translation\"]\n                    }\n                ]))\n            }\n        }));\n    }\n\n    static async create(data) {\n        return new CityModel(await axios.post(API_ADMIN_CITY_CREATE, data));\n    }\n\n    static async delete(cityId) {\n        return await axios.delete(API_MAKE_ADMIN_CITY_DELETE(cityId))\n    }\n\n    static async update(cityId, data) {\n        return new CityModel(await axios.put(API_MAKE_ADMIN_CITY_EDIT(cityId), data));\n    }\n\n    static async updateTranslate(cityId, data) {\n        return await axios.put(API_MAKE_ADMIN_CITY_TRANSLATE_EDIT(cityId), data);\n    }\n\n    static async updateWorkStatus(cityId, workStatus) {\n        return await axios.put(API_MAKE_ADMIN_CITY_CHANGE_STATUS(cityId), {work_status: workStatus});\n    }\n}\n\n","/**\n *service\n */\nimport axios from 'axios'\n/**\n * const\n */\nimport {\n    ADMIN_CREATE_FINISH_STATUS_BY_CITY_GENERATE_PLACE,\n    ADMIN_CREATE_SQUARE_GENERATE_PLACE,\n    ADMIN_GET_GENERATED_SQUARE_GENERATE_PLACE,\n    API_ADMIN_CITY_LIST,\n    API_ADMIN_SIGHT_DOWNLOAD_IMAGE,\n} from \"../../constants/admin/api.constant\";\nimport {QueryString} from \"../../utils/Querystring\";\nimport CityModel from \"../../model/City/city.model\";\n\n\nexport default class GenerationPlaceService {\n    static async create(data) {\n        return await axios.post(ADMIN_CREATE_SQUARE_GENERATE_PLACE, data);\n    }\n\n    static async downloadImage(url) {\n        return await axios.post(API_ADMIN_SIGHT_DOWNLOAD_IMAGE, {url})\n    }\n\n    static async finish(data) {\n        return await axios.post(ADMIN_CREATE_FINISH_STATUS_BY_CITY_GENERATE_PLACE, data)\n    }\n\n    static async generatedSquare(params) {\n        return await axios.get(ADMIN_GET_GENERATED_SQUARE_GENERATE_PLACE, {\n            params,\n            paramsSerializer: params => {\n                return QueryString.stringify(params)\n            }\n        })\n    }\n\n    static async cityWhiteList({countryId, type, ...params}) {\n        let cityList =  await axios.get(API_ADMIN_CITY_LIST, {\n            params,\n            paramsSerializer: params => {\n                return QueryString.stringify({\n                    ...params,\n                    type: type,\n                    country_id: countryId,\n                    include: ['translation'],\n                })\n            }\n        })\n\n        cityList.data = cityList.data.map(city => new CityModel(city));\n\n        return cityList;\n    }\n}\n\n","import GenerationPlaceService from \"../services/admin/generationPlace.service\";\nimport ExcursionRouteTypeEnum from \"../enums/ExcursionRouteType\";\nimport {QueryString} from \"./Querystring\";\n\nexport default class GoogleClient {\n    static key = process.env.REACT_APP_GEOCODING_API\n\n    static getGeometryForCity(latitude, longitude) {\n        return fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${latitude},${longitude}&result_type=locality&key=${this.key}`)\n            .then(res => res.json())\n            .then(city => {\n                if (city.results[0]) {\n                    const {northeast, southwest} = city.results[0].geometry.viewport;\n\n                    return {\n                        north: northeast.lat, //noth lat up\n                        east: northeast.lng, //noth lng right\n                        south: southwest.lat, //south lat down\n                        west: southwest.lng, //south lng left\n                    }\n                }\n\n                return null\n            })\n    }\n\n    static getGeometryForCountry(latitude, longitude) {\n        return fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${latitude},${longitude}&result_type=country&key=${this.key}`)\n            .then(res => res.json())\n            .then(country => {\n                if (country.results[0]) {\n                    const {northeast, southwest} = country.results[0].geometry.viewport;\n\n                    return {\n                        north: northeast.lat, //noth lat up\n                        east: northeast.lng, //noth lng right\n                        south: southwest.lat, //south lat down\n                        west: southwest.lng, //south lng left\n                    }\n                }\n\n                return null\n            })\n    }\n\n    static async getPhotoFile (photo_ref){\n        try {\n            await new Promise(resolve => setTimeout(resolve, 400))\n            const file = await GenerationPlaceService.downloadImage(`https://maps.googleapis.com/maps/api/place/photo?maxwidth=600&sensor=false&maxheight=800&photo_reference=${photo_ref}&key=${this.key}`)\n\n            return file?.id ? file : null;\n        } catch (e) {\n            return null\n        }\n    }\n\n    static async getPhotosId( photosList ){\n        let filesIds = [];\n        const shortPhotosList = photosList?.filter((_, index) => index === 0) || [];\n\n        if(!shortPhotosList.length) {\n            return []\n        }\n\n        for (let i = 0; i < shortPhotosList.length; i++) {\n            const photoReference = shortPhotosList[i].photo_reference;\n            const file = await this.getPhotoFile(photoReference)\n\n            if (file.id) {\n                filesIds = [...filesIds, file.id]\n            }\n        }\n\n        return filesIds\n    }\n\n    static getPlaceDetails( placeId, fields, props = {} ){\n        const defaultFields = [\n            'international_phone_number',\n            'opening_hours',\n            'website',\n            'geometry',\n            'type',\n            'photo',\n            'formatted_address',\n            'address_components',\n            'name',\n            'place_id',\n        ]\n\n        const requestDetailPlace = {\n            placeId: placeId,\n            fields: fields || defaultFields\n        };\n\n        return fetch(`https://maps.googleapis.com/maps/api/place/details/json?place_id=${requestDetailPlace.placeId}&fields=${requestDetailPlace.fields.join(\",\")}&key=${this.key}`)\n            .then(res => res.json())\n            .then(res => {\n                if(res.status === \"OK\"){\n                    return res.result;\n                }\n\n                if([\"ZERO_RESULTS\", \"NOT_FOUND\"].includes(res.status)){\n                    return null\n                }\n\n                return {\n                    failed: true,\n                    message: res.status\n                }\n            })\n            .catch( error => ({\n                failed: true,\n                message: error\n            }))\n    }\n\n    static getDirection( params ){\n        const currentParams = {\n            key: this.key,\n            ...params,\n        }\n        const url = `https://maps.googleapis.com/maps/api/directions/json?${QueryString.stringify(currentParams)}`\n\n        return fetch(url)\n            .then(res => res.json())\n            .then(direction => {\n                if(direction.status === \"OK\"){\n                    return direction;\n                }\n\n                if([\"ZERO_RESULTS\", \"NOT_FOUND\"].includes(direction.status)){\n                    return null\n                }\n\n                return {\n                    failed: true,\n                    message: direction.status\n                }\n            })\n            .catch( error => ({\n                failed: true,\n                message: error\n            }))\n    }\n\n    static getBounds(north, south, east, west) {\n        const bounds = new window.google.maps.LatLngBounds();\n\n        bounds.extend(new window.google.maps.LatLng(north, east));\n        bounds.extend(new window.google.maps.LatLng(south, west));\n\n        return bounds;\n    }\n\n    static getMarker(map, position = {}, icon = null, props){\n        return new window.google.maps.Marker({\n            position: position,\n            icon,\n            map,\n            ...props\n        })\n    }\n\n    static getRectangle( map, bounds, color = \"blue\", props = {} ){\n        console.log('HERE 9')\n\n        return new window.google.maps.Rectangle({\n            strokeColor: color,\n            strokeOpacity: 0.8,\n            strokeWeight: 2,\n            fillColor: color,\n            fillOpacity: 0.35,\n            bounds: bounds.getNorthEast ? GoogleClient.parseBounds(bounds) : bounds,\n            map,\n            ...props,\n        });\n    }\n\n    static getPolyline( map, path, props = {} ){\n        return new window.google.maps.Polyline({\n            strokeColor: \"#FF0000\",\n            strokeOpacity: 1.0,\n            strokeWeight: 3,\n            geodesic: true,\n            path,\n            map,\n            ...props,\n        })\n    }\n\n    static generateCustomMarker(color = \"black\") {\n        const pinSVGFilled = \"M 12,2 C 8.1340068,2 5,5.1340068 5,9 c 0,5.25 7,13 7,13 0,0 7,-7.75 7,-13 0,-3.8659932 -3.134007,-7 -7,-7 z\";\n        const labelOriginFilled = new window.google.maps.Point(12, 9);\n\n\n        return {\n            path: pinSVGFilled,\n            anchor: new window.google.maps.Point(12, 17),\n            fillOpacity: 1,\n            fillColor: color,\n            strokeWeight: 2,\n            strokeColor: \"white\",\n            scale: 2,\n            labelOrigin: labelOriginFilled\n        };\n    }\n\n    static parseBounds( bounds ){\n        return {\n            north: bounds.getNorthEast().lat(), //noth lat\n            south: bounds.getSouthWest().lat(), //south lat\n            east: bounds.getNorthEast().lng(), //noth lng\n            west: bounds.getSouthWest().lng() //south lng\n        }\n    }\n\n    static parseOpeningHours( openingHours ){\n        const days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]\n        let formatOpeningHours = null\n\n        if(openingHours){\n            if(openingHours.length === 1 && openingHours[0].close === undefined){\n                formatOpeningHours = days.reduce((result, day ) => ({\n                    ...result,\n                    [day]: {\n                        open: \"00:00\",\n                        close: \"00:00\"\n                    }\n                }), {})\n\n                return formatOpeningHours\n            }\n\n            formatOpeningHours = openingHours.reduce( (result, openHour) => ({\n                ...result,\n                [days[openHour.open.day]]: {\n                    open: `${openHour.open.time.slice(0, 2)}:${openHour.open.time.slice(2, 4)}`,\n                    close: `${openHour.close.time.slice(0, 2)}:${openHour.close.time.slice(2, 4)}`,\n                }\n            }), {})\n\n            return formatOpeningHours\n        }\n\n        return formatOpeningHours\n    }\n\n}\n","import PlaceTypeEnum from \"../enums/PlaceType\";\nimport FoursquarePlaceTypeEnum from \"../enums/FoursquarePlaceType\";\n\nexport default class PlaceTypeTranslate {\n    static getTranslateForType( type ) {\n        const typeObj = {\n            [PlaceTypeEnum.reserve]: \"Заповідник\",\n            [PlaceTypeEnum.botanical_garden]: \"Ботанічний сад\",\n            [PlaceTypeEnum.beach]: \"Пляж\",\n            [PlaceTypeEnum.mountains]: \"Гори\",\n            [PlaceTypeEnum.sea]: \"Море\",\n            [PlaceTypeEnum.lake]: \"Озеро\",\n            [PlaceTypeEnum.art_gallery]: \"Картинна галерея\",\n            [PlaceTypeEnum.tourist_attraction]: \"Туристична пам'ятка\",\n            [PlaceTypeEnum.campground]: \"Кемпінг\",\n            [PlaceTypeEnum.church]: \"Церква\",\n            [PlaceTypeEnum.theater]: \"Театр\",\n            [PlaceTypeEnum.mosque]: \"Мечеть\",\n            [PlaceTypeEnum.museum]: \"Музей\",\n            [PlaceTypeEnum.park]: \"Парк\",\n            [PlaceTypeEnum.restaurant]: \"Ресторан\",\n            [PlaceTypeEnum.place_of_view]: \"Красивый вид\",\n        }\n\n        return typeObj[type] || `ERROR ${type}`\n    }\n\n    static getTranslateForFoursquareType( type ) {\n        const typeObj = {\n            [FoursquarePlaceTypeEnum.place_of_view]: \"Красивое место\",\n            [FoursquarePlaceTypeEnum.reserve]: \"Природный заповедник\",\n            [FoursquarePlaceTypeEnum.botanical_garden]: \"Батонический сад\",\n            [FoursquarePlaceTypeEnum.mountain]: \"Гора\",\n            [FoursquarePlaceTypeEnum.lake]: \"Озеро\",\n            [FoursquarePlaceTypeEnum.restaurant]: \"Ресторан\",\n            [FoursquarePlaceTypeEnum.art_gallery]: \"Арт галлерея\",\n            [FoursquarePlaceTypeEnum.building]: \"Здание и сооружение\",\n            [FoursquarePlaceTypeEnum.castle]: \"Замок\",\n            [FoursquarePlaceTypeEnum.garden]: \"Сад\",\n            [FoursquarePlaceTypeEnum.historical_and_protected_object]: \"Исторический объект и защещеные объекты\",\n            [FoursquarePlaceTypeEnum.monument]: \"Памятник\",\n            [FoursquarePlaceTypeEnum.palace]: \"Дворец\",\n            [FoursquarePlaceTypeEnum.square]: \"Площадь\",\n            [FoursquarePlaceTypeEnum.art_museum]: \"Музей искуств\",\n            [FoursquarePlaceTypeEnum.historical_museum]: \"Исторческий музей\",\n            [FoursquarePlaceTypeEnum.science_museum]: \"Музей наук\",\n            [FoursquarePlaceTypeEnum.theater]: \"Теарт\",\n            [FoursquarePlaceTypeEnum.opera_theatre]: \"Оперный театр\",\n            [FoursquarePlaceTypeEnum.forest]: \"Лес\",\n            [FoursquarePlaceTypeEnum.national_park]: \"Национальный парк\",\n            [FoursquarePlaceTypeEnum.natural_park]: \"Природный парк\",\n        }\n\n        return typeObj[type] || `ERROR ${type}`\n    }\n}\n","import PlaceTypeEnum from \"./PlaceType\";\n\nexport default class FoursquarePlaceTypeEnum {\n    static get place_of_view(){return \"place_of_view\"}\n    static get reserve(){return \"reserve\"}\n    static get botanical_garden(){return \"botanical_garden\"}\n    static get mountain(){return \"mountain\"}\n    static get lake(){return \"lake\"}\n    static get restaurant(){return \"restaurant\"}\n    static get art_gallery(){return \"art_gallery\"}\n    static get building(){return \"building\"}\n    static get castle(){return \"castle\"}\n    static get garden(){return \"garden\"}\n    static get historical_and_protected_object(){return \"historical_and_protected_object\"}\n    static get monument(){return \"monument\"}\n    static get palace(){return \"palace\"}\n    static get square(){return \"square\"}\n    static get art_museum(){return \"art_museum\"}\n    static get historical_museum(){return \"historical_museum\"}\n    static get science_museum(){return \"science_museum\"}\n    static get theater(){return \"theater\"}\n    static get opera_theatre(){return \"opera_theatre\"}\n    static get forest(){return \"forest\"}\n    static get national_park(){return \"national_park\"}\n    static get natural_park(){return \"natural_park\"}\n\n    static get typeOriginIds() {\n        return {\n            [PlaceTypeEnum.reserve]: [16028],\n            [PlaceTypeEnum.botanical_garden]: [16005],\n            [PlaceTypeEnum.mountains]: [16027],\n            [PlaceTypeEnum.lake]: [16023],\n            [PlaceTypeEnum.restaurant]: [13065],\n            [PlaceTypeEnum.art_gallery]: [10004],\n            [PlaceTypeEnum.tourist_attraction]: [16007, 16011, 16017, 16020, 16026, 16031, 16041],\n            [PlaceTypeEnum.museum]: [10028, 10030, 10031],\n            [PlaceTypeEnum.theater]: [10043, 10042],\n            [PlaceTypeEnum.park]: [16015, 16034, 16035],\n            [PlaceTypeEnum.place_of_view]: [16046],\n        }\n    }\n\n    static get typeIds() {\n        return {\n            [FoursquarePlaceTypeEnum.place_of_view]: 16046,\n            [FoursquarePlaceTypeEnum.reserve]: 16028,\n            [FoursquarePlaceTypeEnum.botanical_garden]: 16005,\n            [FoursquarePlaceTypeEnum.mountain]: 16027,\n            [FoursquarePlaceTypeEnum.lake]: 16023,\n            [FoursquarePlaceTypeEnum.restaurant]: 13065,\n            [FoursquarePlaceTypeEnum.art_gallery]: 10004,\n            [FoursquarePlaceTypeEnum.building]: 16007,\n            [FoursquarePlaceTypeEnum.castle]: 16011,\n            [FoursquarePlaceTypeEnum.garden]: 16017,\n            [FoursquarePlaceTypeEnum.historical_and_protected_object]: 16020,\n            [FoursquarePlaceTypeEnum.monument]: 16026,\n            [FoursquarePlaceTypeEnum.palace]: 16031,\n            [FoursquarePlaceTypeEnum.square]: 16041,\n            [FoursquarePlaceTypeEnum.art_museum]: 10028,\n            [FoursquarePlaceTypeEnum.historical_museum]: 10030,\n            [FoursquarePlaceTypeEnum.science_museum]: 10031,\n            [FoursquarePlaceTypeEnum.theater]: 10043,\n            [FoursquarePlaceTypeEnum.opera_theatre]: 10042,\n            [FoursquarePlaceTypeEnum.forest]: 16015,\n            [FoursquarePlaceTypeEnum.national_park]: 16034,\n            [FoursquarePlaceTypeEnum.natural_park]: 16035,\n        }\n    }\n}\n","/**\n *service\n */\nimport axios from 'axios'\nimport merge from 'deepmerge'\n/**\n * const\n */\nimport {\n    API_ADMIN_COUNTRY_CREATE,\n    API_ADMIN_COUNTRY_LIST,\n    API_MAKE_ADMIN_COUNTRY_DELETE,\n    API_MAKE_ADMIN_COUNTRY_SHOW,\n    API_MAKE_ADMIN_COUNTRY_TRANSLATE_EDIT,\n    API_MAKE_ADMIN_COUNTRY_UPDATE,\n} from \"../../constants/admin/api.constant\";\n/**\n * utils\n */\nimport {QueryString} from \"../../utils/Querystring\";\n/**\n * model\n */\nimport CountryModel from \"../../model/Country/country.model\";\n\nexport default class CountryService {\n    static async list(params) {\n        let countryList = await axios.get(API_ADMIN_COUNTRY_LIST, {\n            params,\n            paramsSerializer: params => {\n                return QueryString.stringify(merge.all([\n                    params,\n                    {\n                        include: [\"translation\", \"translations.language\", \"officialLanguageRelation\", \"currency\", \"capital\", \"capital.translation\"]\n                    }\n                ]))\n            }\n        });\n\n        countryList.data = countryList.data.map( country => new CountryModel(country));\n\n        return countryList;\n    }\n\n    static async show(countryId, params = {}) {\n        return new CountryModel(await axios.get(API_MAKE_ADMIN_COUNTRY_SHOW(countryId), {\n            params,\n            paramsSerializer: params => {\n                return QueryString.stringify(merge.all([\n                    params,\n                    {\n                        include: [\"landscapeImageRelation\", \"portraitImageRelation\", \"translation\", \"translations.language\", \"officialLanguageRelation\", \"currency\", \"capital\", \"capital.translation\", ]\n                    }\n                ]))\n            }\n        }));\n    }\n\n    static async create(data) {\n        return new CountryModel(await axios.post(API_ADMIN_COUNTRY_CREATE, data));\n    }\n\n    static async update(countryId, data) {\n        return new CountryModel(await axios.put(API_MAKE_ADMIN_COUNTRY_UPDATE(countryId), data));\n    }\n\n    static async updateTranslate(countryId, data) {\n        return await axios.put(API_MAKE_ADMIN_COUNTRY_TRANSLATE_EDIT(countryId), data);\n    }\n\n    static async delete(countryId) {\n        return await axios.delete(API_MAKE_ADMIN_COUNTRY_DELETE(countryId));\n    }\n}\n\n"],"sourceRoot":""}